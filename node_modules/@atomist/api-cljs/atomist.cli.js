var window=global;var $CLJS=require("./cljs_env");require("./goog.base.js");require("./cljs.core.js");require("./atomist.local_runner.js");require("./atomist.middleware.js");require("./clojure.tools.cli.js");require("./atomist.cljs_log.js");require("./cljs.nodejs.js");require("./goog.string.string.js");require("./goog.string.stringformat.js");require("./cljs_node_io.core.js");require("./cljs.reader.js");require("./clojure.string.js");require("./atomist.github.js");require("./atomist.api.js");require("./cljs.pprint.js");require("./cljs.core.async.js");
var IY=function(a){return $CLJS.Dd(function(b,c){return $CLJS.r($CLJS.qK.h(c))?$CLJS.W.l(b,$CLJS.rj.h(c),$CLJS.qK.h(c)):b},$CLJS.Ee,a)},JY=function(a,b){return $CLJS.Dd(function(c,d){return $CLJS.N(d,b)?$CLJS.W.l(c,$CLJS.rj.h(d),b.h?b.h(d):b.call(null,d)):c},$CLJS.Ee,a)},KY=function(a,b){return $CLJS.N(a,b)?$CLJS.jn.l(a,new $CLJS.T(null,1,5,$CLJS.U,[b],null),function(c){return null==c?null:$CLJS.od(c)?c:new $CLJS.T(null,1,5,$CLJS.U,[c],null)}):a},LY=function(a){return $CLJS.kJ($CLJS.Hh.g(function(b){return["  %",
0!==b?["-",$CLJS.t.h(b)].join(""):null,"s"].join("")},a))},NY=function(a,b){var c=LY(a);return $CLJS.Hh.g(function(d){return $CLJS.xe.l(MY,c,d).replace(/[\s\xa0]+$/,"")},b)},OY=function(a,b,c){c=$CLJS.xe.g($CLJS.ye,c);c=$CLJS.ze(c);c=$CLJS.M.g(c,$CLJS.oK);var d=$CLJS.B(b);$CLJS.C(d);$CLJS.D(d);for(var e=d=$CLJS.Jf,f=b;;){b=d;d=e;f=$CLJS.B(f);e=$CLJS.C(f);f=$CLJS.D(f);var h=e,g=f;if($CLJS.r(h)){var k=$CLJS.HD,l=h;if($CLJS.r(function(){var p=/^--$/,u=l;return k.g?k.g(p,u):k.call(null,p,u)}()))e=b,f=
$CLJS.Ij.g(d,g),b=$CLJS.Jf,d=e,e=f,f=b;else if($CLJS.r(function(){var p=/^--\S+=/,u=l;return k.g?k.g(p,u):k.call(null,p,u)}()))e=$CLJS.Wd.g(b,$CLJS.Ij.g(new $CLJS.T(null,1,5,$CLJS.U,[$CLJS.tK],null),$CLJS.en(h,/=/,2))),f=d,b=g,d=e,e=f,f=b;else if($CLJS.r(function(){var p=/^--/,u=l;return k.g?k.g(p,u):k.call(null,p,u)}())){e=$CLJS.N(a,h)?new $CLJS.T(null,2,5,$CLJS.U,[$CLJS.C(g),$CLJS.Fc(g)],null):new $CLJS.T(null,2,5,$CLJS.U,[null,g],null);f=$CLJS.K(e,0,null);e=$CLJS.K(e,1,null);b=$CLJS.Wd.g(b,$CLJS.Ij.g(new $CLJS.T(null,
2,5,$CLJS.U,[$CLJS.tK,h],null),$CLJS.r(f)?new $CLJS.T(null,1,5,$CLJS.U,[f],null):$CLJS.Jf));f=d;var m=e;d=b;e=f;f=m}else $CLJS.r(function(){var p=/^-./,u=l;return k.g?k.g(p,u):k.call(null,p,u)}())?(e=function(){var p=$CLJS.Fc(h),u=$CLJS.B(p);$CLJS.C(u);$CLJS.D(u);for(u=$CLJS.Jf;;){p=$CLJS.B(p);var v=$CLJS.C(p);p=$CLJS.D(p);v=["-",$CLJS.t.h(v)].join("");if($CLJS.N(a,v))return $CLJS.B(p)?new $CLJS.T(null,2,5,$CLJS.U,[$CLJS.Wd.g(u,new $CLJS.T(null,3,5,$CLJS.U,[$CLJS.rK,v,$CLJS.kJ(p)],null)),g],null):
new $CLJS.T(null,2,5,$CLJS.U,[$CLJS.Wd.g(u,new $CLJS.T(null,3,5,$CLJS.U,[$CLJS.rK,v,$CLJS.C(g)],null)),$CLJS.Fc(g)],null);if($CLJS.B(p))u=$CLJS.Wd.g(u,new $CLJS.T(null,2,5,$CLJS.U,[$CLJS.rK,v],null));else return new $CLJS.T(null,2,5,$CLJS.U,[$CLJS.Wd.g(u,new $CLJS.T(null,2,5,$CLJS.U,[$CLJS.rK,v],null)),g],null)}}(),f=$CLJS.K(e,0,null),e=$CLJS.K(e,1,null),b=$CLJS.Ij.g(b,f),f=d,m=e,d=b,e=f,f=m):$CLJS.r(c)?(e=b,f=$CLJS.Ij.g(d,$CLJS.be(h,g)),b=$CLJS.Jf,d=e,e=f,f=b):(e=b,f=$CLJS.Wd.g(d,h),b=g,d=e,e=f,
f=b)}else return new $CLJS.T(null,2,5,$CLJS.U,[b,d],null)}},PY=function(a){return $CLJS.Zj.v($CLJS.I([$CLJS.cn(" ",a)]))},QY=function(a,b){return["Missing required argument for ",PY($CLJS.I([a,b]))].join("")},RY=function(a,b,c){var d=$CLJS.ze(a);d=$CLJS.M.g(d,$CLJS.mK);if($CLJS.r($CLJS.r(d)?null==c:d))return new $CLJS.T(null,2,5,$CLJS.U,[$CLJS.cK,QY(b,d)],null);$CLJS.r(d)?d=c:(d=$CLJS.tK.h(a),$CLJS.r(d)&&(d=$CLJS.Qm(/^--\[no-\]/,$CLJS.tK.h(a)),d=$CLJS.r(d)?$CLJS.Qm(/^--no-/,b):d),d=$CLJS.db(d));var e=
$CLJS.ze(a);e=$CLJS.M.g(e,$CLJS.iK);if($CLJS.r(e))try{var f=new $CLJS.T(null,2,5,$CLJS.U,[e.h?e.h(d):e.call(null,d),null],null)}catch(k){f=$CLJS.U,d=$CLJS.t.h(k),d=["Error while parsing option ",PY($CLJS.I([b,c])),": ",$CLJS.t.h(d)].join(""),f=new $CLJS.T(null,2,5,f,[null,d],null)}else f=new $CLJS.T(null,2,5,$CLJS.U,[d,null],null);d=f;f=$CLJS.K(d,0,null);d=$CLJS.K(d,1,null);if($CLJS.r(d))b=new $CLJS.T(null,2,5,$CLJS.U,[$CLJS.cK,d],null);else{d=$CLJS.ze(a);a=$CLJS.M.g(d,$CLJS.nK);d=$CLJS.M.g(d,$CLJS.pK);
a:for(e=$CLJS.B(a),$CLJS.C(e),$CLJS.D(e),e=$CLJS.B(d),$CLJS.C(e),$CLJS.D(e),e=d;;){d=$CLJS.B(a);a=$CLJS.C(d);d=$CLJS.D(d);var h=$CLJS.B(e);e=$CLJS.C(h);h=$CLJS.D(h);if($CLJS.r(a)){try{var g=a.h?a.h(f):a.call(null,f)}catch(k){g=null}if($CLJS.r(g))e=h,a=d;else{g=$CLJS.U;a=e;b=["Failed to validate ",PY($CLJS.I([b,c])),$CLJS.r(a)?[": ",$CLJS.t.h(a)].join(""):""].join("");b=new $CLJS.T(null,2,5,g,[$CLJS.cK,b],null);break a}}else{b=null;break a}}b=$CLJS.r(b)?b:new $CLJS.T(null,2,5,$CLJS.U,[f,null],null)}return b},
SY=function(a,b,c,d){return new $CLJS.fe(null,function(){var e=$CLJS.B(d);if(e){var f=$CLJS.Hj.g(a,e);return a===$CLJS.F(f)?$CLJS.be(f,SY(a,b,c,$CLJS.gf(b,e))):new $CLJS.Td(null,$CLJS.Hj.g(a,$CLJS.Ej.g(f,c)),null,1,null)}return null},null,null)},TY=function(a,b){var c=$CLJS.ze(b),d=$CLJS.M.g(c,$CLJS.rK),e=$CLJS.M.g(c,$CLJS.tK),f=$CLJS.M.g(c,$CLJS.mK),h=$CLJS.M.g(c,$CLJS.gK),g=$CLJS.M.g(c,$CLJS.fi),k=$CLJS.M.g(c,$CLJS.bK),l=$CLJS.M.g(c,$CLJS.eK);c=$CLJS.r($CLJS.r(d)?e:d)?[$CLJS.t.h(d),", ",$CLJS.t.h(e)].join(""):
$CLJS.r(e)?["    ",$CLJS.t.h(e)].join(""):$CLJS.r(d)?d:null;c=$CLJS.r(f)?new $CLJS.T(null,2,5,$CLJS.U,[[$CLJS.t.h(c)," ",$CLJS.t.h(f)].join(""),function(){if($CLJS.r(k))return k;var m=$CLJS.N(b,$CLJS.fi)?null!=g?$CLJS.t.h(g):"nil":null;if($CLJS.r(m))return m;m=$CLJS.r(l)?"\x3ccomputed\x3e":null;return $CLJS.r(m)?m:""}()],null):new $CLJS.T(null,2,5,$CLJS.U,[c,""],null);f=$CLJS.K(c,0,null);c=$CLJS.K(c,1,null);return $CLJS.r(a)?new $CLJS.T(null,3,5,$CLJS.U,[f,c,$CLJS.r(h)?h:""],null):new $CLJS.T(null,
2,5,$CLJS.U,[f,$CLJS.r(h)?h:""],null)},VY=function(a){if($CLJS.B(a)){var b=$CLJS.Xe(function(c){var d=$CLJS.mK.h(c);return $CLJS.r(d)?$CLJS.N(c,$CLJS.fi)||$CLJS.N(c,$CLJS.eK):d},a);a=$CLJS.Hh.g($CLJS.bf(TY,b),a);b=$CLJS.xe.l($CLJS.Hh,function(){function c(e){var f=null;if(0<arguments.length){f=0;for(var h=Array(arguments.length-0);f<h.length;)h[f]=arguments[f+0],++f;f=new $CLJS.Bc(h,0,null)}return d.call(this,f)}function d(e){return $CLJS.xe.g(UY,$CLJS.Hh.g($CLJS.F,e))}c.ba=0;c.aa=function(e){e=$CLJS.B(e);
return d(e)};c.v=d;return c}(),a);a=NY(b,a);return $CLJS.cn("\n",a)}return""},WY=function(a){if($CLJS.r(!0)){var b=$CLJS.gh($CLJS.xe.l($CLJS.Bj,a,$CLJS.uK));if($CLJS.B(b)){b=["Warning: The following options to parse-opts are unrecognized: ",$CLJS.cn(", ",b)].join("");var c=$CLJS.$a;$CLJS.$a=$CLJS.ab;try{$CLJS.Wm($CLJS.I([b]))}finally{$CLJS.$a=c}}}return $CLJS.XD(a,$CLJS.uK)},XY=function(a){var b=$CLJS.ph(function(k){return"string"===typeof k||null==k},a);a=$CLJS.xe.g($CLJS.ye,$CLJS.gf($CLJS.F(b),
a));var c=$CLJS.K(b,0,null),d=$CLJS.K(b,1,null);b=$CLJS.K(b,2,null);d=$CLJS.r(d)?d:$CLJS.tK.h(a);var e=$CLJS.r(d)?$CLJS.Fc($CLJS.Qm(/^(--[^ =]+)(?:[ =](.*))?/,d)):null;d=$CLJS.K(e,0,null);e=$CLJS.K(e,1,null);var f=$CLJS.r(d)?$CLJS.Ih.h($CLJS.H($CLJS.Qm(/^--(\[no-\])?(.*)/,d),2)):null,h=$CLJS.jK.h(a),g=$CLJS.B(h)?$CLJS.xe.l($CLJS.Hh,$CLJS.Lj,SY(2,2,$CLJS.jf(null),h)):null;h=$CLJS.K(g,0,null);g=$CLJS.K(g,1,null);return $CLJS.Xj.v($CLJS.I([new $CLJS.q(null,7,[$CLJS.rj,f,$CLJS.rK,c,$CLJS.tK,d,$CLJS.mK,
e,$CLJS.gK,b,$CLJS.nK,h,$CLJS.pK,g],null),WY($CLJS.Bj.g(a,$CLJS.jK))]))},YY=function(a){return $CLJS.Hh.g(function(b){return KY(KY($CLJS.rd(b)?WY(b):XY(b),$CLJS.nK),$CLJS.pK)},a)},ZY=function(a){return $CLJS.Dd(function(b,c){var d=$CLJS.ze(c);c=$CLJS.M.g(d,$CLJS.mK);var e=$CLJS.M.g(d,$CLJS.rK);d=$CLJS.M.g(d,$CLJS.tK);return $CLJS.r(c)?$CLJS.Ij.g(b,$CLJS.Xl($CLJS.Yl,new $CLJS.T(null,2,5,$CLJS.U,[e,d],null))):b},$CLJS.Yj,a)},$Y=function(a,b,c){return $CLJS.C($CLJS.Wl(function(d){d=$CLJS.M.g(d,b);if($CLJS.r(d)){var e=
$CLJS.ed($CLJS.Qm(/^--\[no-\](.*)/,d));d=$CLJS.r(e)?$CLJS.Xm([["--",$CLJS.t.h(e)].join(""),["--no-",$CLJS.t.h(e)].join("")]):$CLJS.Xm([d]);return $CLJS.N(d,c)}return null},a))},aZ=function(a,b,c){c=$CLJS.xe.g($CLJS.ye,c);c=$CLJS.ze(c);var d=$CLJS.M.g(c,$CLJS.kK),e=$CLJS.M.g(c,$CLJS.sK);c=JY(a,$CLJS.fi);var f=JY(a,$CLJS.eK),h=IY(a);return function(g){var k=$CLJS.K(g,0,null),l=$CLJS.K(g,1,null);g=$CLJS.K(g,2,null);return $CLJS.r(d)?new $CLJS.T(null,2,5,$CLJS.U,[$CLJS.XD(k,l),g],null):new $CLJS.T(null,
2,5,$CLJS.U,[k,g],null)}(function(g){return $CLJS.Dd(function(k,l){var m=$CLJS.K(k,0,null),p=$CLJS.K(k,1,null);k=$CLJS.K(k,2,null);var u=$CLJS.K(l,0,null),v=$CLJS.K(l,1,null);if($CLJS.N($CLJS.Ym(p),u))m=new $CLJS.T(null,3,5,$CLJS.U,[m,p,k],null);else{l=$CLJS.U;var A=$CLJS.W.l,z=$CLJS.C(g);v=v.h?v.h(z):v.call(null,z);m=new $CLJS.T(null,3,5,l,[A.call($CLJS.W,m,u,v),p,k],null)}return m},g,f)}(function(g){return $CLJS.Dd(function(k,l){var m=$CLJS.K(k,0,null),p=$CLJS.K(k,1,null);k=$CLJS.K(k,2,null);var u=
$CLJS.K(l,0,null);l=$CLJS.K(l,1,null);return $CLJS.N(m,u)?new $CLJS.T(null,3,5,$CLJS.U,[m,p,k],null):new $CLJS.T(null,3,5,$CLJS.U,[m,p,$CLJS.Wd.g(k,l)],null)},g,h)}($CLJS.Dd(function(g,k){var l=$CLJS.K(g,0,null),m=$CLJS.K(g,1,null);g=$CLJS.K(g,2,null);var p=$CLJS.K(k,0,null),u=$CLJS.K(k,1,null),v=$CLJS.K(k,2,null),A=$Y(a,p,u);if($CLJS.r(A)){k=RY(A,u,v);var z=$CLJS.K(k,0,null);k=$CLJS.K(k,1,null);var E=$CLJS.rj.h(A);return $CLJS.G.g(z,$CLJS.cK)?new $CLJS.T(null,3,5,$CLJS.U,[l,m,$CLJS.Wd.g(g,k)],null):
$CLJS.r(function(){if($CLJS.r(e)){var J=$Y(a,$CLJS.rK,v);return $CLJS.r(J)?J:$Y(a,$CLJS.tK,v)}return e}())?new $CLJS.T(null,3,5,$CLJS.U,[l,m,$CLJS.Wd.g(g,QY(u,$CLJS.mK.h(A)))],null):new $CLJS.T(null,3,5,$CLJS.U,[function(){var J=$CLJS.dK.h(A);if($CLJS.r(J))return $CLJS.jn.l(l,new $CLJS.T(null,1,5,$CLJS.U,[E],null),J);J=$CLJS.hK.g(A,$CLJS.W);return J.l?J.l(l,E,z):J.call(null,l,E,z)}(),$CLJS.Wd.g(m,E),g],null)}return new $CLJS.T(null,3,5,$CLJS.U,[l,m,$CLJS.Wd.g(g,["Unknown option: ",$CLJS.Zj.v($CLJS.I([u]))].join(""))],
null)},new $CLJS.T(null,3,5,$CLJS.U,[c,$CLJS.Jf,$CLJS.Jf],null),b))))},bZ=function(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;var e=arguments[0];c=arguments[1];b=$CLJS.xe.g($CLJS.ye,2<b.length?new $CLJS.Bc(b.slice(2),0,null):null);b=$CLJS.ze(b);var f=$CLJS.M.g(b,$CLJS.oK);d=$CLJS.M.g(b,$CLJS.kK);var h=$CLJS.M.g(b,$CLJS.sK);b=$CLJS.M.g(b,$CLJS.lK);c=YY(c);var g=ZY(c);e=OY(g,e,$CLJS.I([$CLJS.oK,f]));f=$CLJS.K(e,0,null);e=$CLJS.K(e,1,null);h=aZ(c,f,$CLJS.I([$CLJS.kK,
d,$CLJS.sK,h]));d=$CLJS.K(h,0,null);h=$CLJS.K(h,1,null);b=$CLJS.r(b)?b:VY;b=b.h?b.h(c):b.call(null,c);return new $CLJS.q(null,4,[$CLJS.Io,d,$CLJS.fK,e,$CLJS.wn,b,$CLJS.Ln,$CLJS.B(h)?h:null],null)},cZ=function(a){return function(b){return new Promise(function(c){var d=a.h?a.h(b):a.call(null,b);return c.h?c.h(d):c.call(null,d)})}},fZ=function(a){a=$CLJS.ze(a);var b=$CLJS.M.g(a,$CLJS.Ol),c=$CLJS.M.g(a,$CLJS.oj),d=$CLJS.M.g(a,dZ),e=$CLJS.M.g(a,eZ);$CLJS.ai.g($CLJS.JV,$CLJS.kl($CLJS.Ih.h(b)));return $CLJS.MV($CLJS.W.l($CLJS.NV($CLJS.OV(c,
"sync","raw-message","channel-id","user-id"),new $CLJS.q(null,2,[$CLJS.Ri,"default",$CLJS.oB,$CLJS.Jf],null)),$CLJS.LV,$CLJS.kl(!0)),$CLJS.qY({sync:function(f){return f.Wj(cZ(d),{clone:!0},e)}}))},UY=function UY(a){switch(arguments.length){case 1:return UY.h(arguments[0]);case 2:return UY.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return UY.v(arguments[0],arguments[1],new $CLJS.Bc(c.slice(2),0,null))}};UY.h=function(a){return a};
UY.g=function(a,b){return a>b?a:b};UY.v=function(a,b,c){return $CLJS.Dd(UY,a>b?a:b,c)};UY.aa=function(a){var b=$CLJS.C(a),c=$CLJS.D(a);a=$CLJS.C(c);c=$CLJS.D(c);return this.v(b,a,c)};UY.ba=2;var MY=function MY(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return MY.v(arguments[0],1<c.length?new $CLJS.Bc(c.slice(1),0,null):null)};MY.v=function(a,b){return $CLJS.xe.l($CLJS.Sl,a,b)};MY.ba=1;MY.aa=function(a){var b=$CLJS.C(a);a=$CLJS.D(a);return this.v(b,a)};
var eZ=new $CLJS.Q(null,"reducer","reducer",1705592893),gZ=new $CLJS.Q(null,"help","help",-439233446),hZ=new $CLJS.Q(null,"module","module",1424618191),dZ=new $CLJS.Q(null,"mapper","mapper",-1774843406);$CLJS.bb();
var iZ=new $CLJS.T(null,4,5,$CLJS.U,[new $CLJS.T(null,7,5,$CLJS.U,["-e","--env ENV","Environment Name",$CLJS.fi,"custom",$CLJS.jK,new $CLJS.T(null,2,5,$CLJS.U,[new $CLJS.lh(null,new $CLJS.q(null,4,["staging",null,"custom",null,"prod",null,"prod-github-auth",null],null),null),"only these environments are supported"],null)],null),new $CLJS.T(null,3,5,$CLJS.U,["-t","--team TEAM","workspace id"],null),new $CLJS.T(null,3,5,$CLJS.U,["-m","--module MODULE","javascript mapper module file"],null),new $CLJS.T(null,
3,5,$CLJS.U,["-h","--help",null],null)],null);
module.exports={main:function(){var a=bZ(process.argv,iZ),b=$CLJS.ze(a),c=$CLJS.M.g(b,$CLJS.Io);a=$CLJS.M.g(b,$CLJS.wn);b=$CLJS.M.g(b,$CLJS.Ln);return $CLJS.N(c,gZ)?($CLJS.GU.h?$CLJS.GU.h(a):$CLJS.GU.call(null,a),process.exit(0)):$CLJS.r($CLJS.r(b)?!$CLJS.nd(b):b)?($CLJS.FU($CLJS.I([b])),$CLJS.GU.h?$CLJS.GU.h(a):$CLJS.GU.call(null,a),process.exit(1)):fZ($CLJS.Xj.v($CLJS.I([c,function(){var d=hZ.h(c);d=$CLJS.Nx.h?$CLJS.Nx.h(d):$CLJS.Nx.call(null,d);var e=new $CLJS.T(null,2,5,$CLJS.U,[d.Kk,d.Nk],null);
d=$CLJS.K(e,0,null);e=$CLJS.K(e,1,null);return new $CLJS.q(null,2,[dZ,d,eZ,e],null)}()]))).then(function(){return process.exit(0)})},visitRepoNoClone:function(a){a=$CLJS.ze(a);var b=$CLJS.M.g(a,$CLJS.Ol),c=$CLJS.M.g(a,$CLJS.oj),d=$CLJS.M.g(a,dZ),e=$CLJS.M.g(a,eZ);$CLJS.ai.g($CLJS.JV,$CLJS.kl($CLJS.Ih.h(b)));return $CLJS.MV($CLJS.W.l($CLJS.NV($CLJS.OV(c,"sync","raw-message","channel-id","user-id"),new $CLJS.q(null,2,[$CLJS.Ri,"default",$CLJS.oB,$CLJS.Jf],null)),$CLJS.LV,$CLJS.kl(!0)),$CLJS.qY({sync:function(f){return f.Wj(cZ(d),
{clone:!1},e)}}))},visitRepo:fZ};