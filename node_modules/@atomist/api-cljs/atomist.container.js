var window=global;var $CLJS=require("./cljs_env");require("./goog.base.js");require("./cljs.core.js");require("./atomist.cljs_log.js");require("./cljs.core.async.js");require("./atomist.promise.js");require("./atomist.api.js");require("./cljs_node_io.core.js");require("./goog.object.object.js");require("./atomist.topics.js");
var MU,NU,PU,VU,WU,XU,$U,cV,fV,mV,nV,OU;MU=function(a){return $CLJS.Em(a)?a:(a=$CLJS.B(a))?a:$CLJS.Ec};
NU=function(a,b){return new $CLJS.fe(null,function(){var c=$CLJS.B(b);if(c){if($CLJS.ud(c)){for(var d=$CLJS.gc(c),e=$CLJS.F(d),f=$CLJS.ke(e),h=0;;)if(h<e){var g=function(){var k=$CLJS.gd(d,h);return a.h?a.h(k):a.call(null,k)}();null!=g&&f.add(g);h+=1}else break;return $CLJS.ne(f.Ka(),NU(a,$CLJS.hc(c)))}e=function(){var k=$CLJS.C(c);return a.h?a.h(k):a.call(null,k)}();return null==e?NU(a,$CLJS.Fc(c)):$CLJS.be(e,NU(a,$CLJS.Fc(c)))}return null},null,null)};
PU=function(a,b,c,d,e,f,h,g,k,l){b=$CLJS.r(b)?b:$CLJS.od;c=$CLJS.r(c)?c:$CLJS.nB;$CLJS.hM($CLJS.nM(b,a,$CLJS.VN,null))?a=$CLJS.rM(c,b,g,k,l,a):$CLJS.r($CLJS.r(e)?$CLJS.kn.g(e,$CLJS.pe(e,a)):e)?a=new $CLJS.T(null,1,5,$CLJS.U,[new $CLJS.q(null,5,[$CLJS.Yn,g,$CLJS.pM,MU($CLJS.B($CLJS.Ej.v(new $CLJS.Td(null,$CLJS.nO,null,1,null),new $CLJS.Td(null,e,null,1,null),$CLJS.I([new $CLJS.Td(null,MU($CLJS.B($CLJS.Ej.g(new $CLJS.Td(null,$CLJS.HN,null,1,null),new $CLJS.Td(null,$CLJS.Z,null,1,null)))),null,1,null)])))),
$CLJS.Ci,a,$CLJS.qM,k,$CLJS.No,l],null)],null):(e=$CLJS.r(f)?f:h,e=$CLJS.r(e)?!(($CLJS.r(f)?f:0)<=$CLJS.pe($CLJS.r(h)?h+1:f,a)&&$CLJS.pe($CLJS.r(h)?h+1:f,a)<=($CLJS.r(h)?h:9007199254740991)):e,a=$CLJS.r(e)?new $CLJS.T(null,1,5,$CLJS.U,[new $CLJS.q(null,5,[$CLJS.Yn,g,$CLJS.pM,MU($CLJS.B($CLJS.Ej.v(new $CLJS.Td(null,$CLJS.eO,null,1,null),new $CLJS.Td(null,$CLJS.r(f)?f:0,null,1,null),$CLJS.I([new $CLJS.Td(null,MU($CLJS.B($CLJS.Ej.g(new $CLJS.Td(null,$CLJS.HN,null,1,null),new $CLJS.Td(null,$CLJS.Z,null,
1,null)))),null,1,null),new $CLJS.Td(null,$CLJS.r(h)?h:9007199254740991,null,1,null)])))),$CLJS.Ci,a,$CLJS.qM,k,$CLJS.No,l],null)],null):$CLJS.r($CLJS.r(d)?!$CLJS.nd(a)&&$CLJS.db($CLJS.xe.g(OU,a)):d)?new $CLJS.T(null,1,5,$CLJS.U,[new $CLJS.q(null,5,[$CLJS.Yn,g,$CLJS.pM,$CLJS.$N,$CLJS.Ci,a,$CLJS.qM,k,$CLJS.No,l],null)],null):null);return a};$CLJS.QU=function(a){if(a instanceof Error)throw a;return a};
$CLJS.RU=function(a,b,c,d){a={correlationId:a,eventId:b,skillId:d,workspaceId:c};b=$CLJS.qv.createLogger;return $CLJS.IU=b.h?b.h(a):b.call(null,a)};$CLJS.SU=function(a,b,c,d){var e=$CLJS.W.l,f=$CLJS.M.g(a,b);c=c.g?c.g(f,d):c.call(null,f,d);return e.call($CLJS.W,a,b,c)};
$CLJS.TU=function(a,b,c){var d=$CLJS.Fl(null);a.then(function(e){var f=$CLJS.Fl(1);$CLJS.gl(function(){var h=function(){return function(){function k(p){for(;;){a:try{for(;;){var u=p,v=u[1];if(1===v){var A=b.h?b.h(e):b.call(null,e);var z=$CLJS.Jy(u,2,d,A)}else if(2===v){var E=u[2],J=$CLJS.Wk(d);u[7]=E;z=$CLJS.Iy(u,J)}else z=null;if(!$CLJS.R(z,$CLJS.X)){var O=z;break a}}}catch(P){O=P;p[2]=O;if($CLJS.B(p[4]))p[1]=$CLJS.C(p[4]);else throw O;O=$CLJS.X}if(!$CLJS.R(O,$CLJS.X))return O}}function l(){var p=
[null,null,null,null,null,null,null,null];p[0]=m;p[1]=1;return p}var m=null;m=function(p){switch(arguments.length){case 0:return l.call(this);case 1:return k.call(this,p)}throw Error("Invalid arity: "+arguments.length);};m.N=l;m.h=k;return m}()}(),g=function(){var k=h();k[6]=f;return k}();return $CLJS.fy(g)});return f}).catch(function(e){$CLJS.FU($CLJS.I(["promise error:  ",e]));var f=$CLJS.Fl(1);$CLJS.gl(function(){var h=function(){return function(){function k(p){for(;;){a:try{for(;;){var u=p,v=
u[1];if(1===v){var A=c.h?c.h(e):c.call(null,e);var z=$CLJS.Jy(u,2,d,A)}else if(2===v){var E=u[2],J=$CLJS.Wk(d);u[7]=E;z=$CLJS.Iy(u,J)}else z=null;if(!$CLJS.R(z,$CLJS.X)){var O=z;break a}}}catch(P){O=P;p[2]=O;if($CLJS.B(p[4]))p[1]=$CLJS.C(p[4]);else throw O;O=$CLJS.X}if(!$CLJS.R(O,$CLJS.X))return O}}function l(){var p=[null,null,null,null,null,null,null,null];p[0]=m;p[1]=1;return p}var m=null;m=function(p){switch(arguments.length){case 0:return l.call(this);case 1:return k.call(this,p)}throw Error("Invalid arity: "+
arguments.length);};m.N=l;m.h=k;return m}()}(),g=function(){var k=h();k[6]=f;return k}();return $CLJS.fy(g)});return f});return d};$CLJS.UU=function(a){return $CLJS.xe.l($CLJS.EU,$CLJS.rv,a)};VU=function(a,b){return $CLJS.LL(function(c,d){c=a.h?a.h(c):a.call(null,c);d=a.h?a.h(d):a.call(null,d);var e=$CLJS.KL($CLJS.yd);return e.g?e.g(c,d):e.call(null,c,d)},b)};WU=function(a,b){return VU(a,b)};
XU=function(a){var b=$CLJS.Fl(null);a.then(function(c){var d=$CLJS.Fl(1);$CLJS.gl(function(){var e=function(){function h(g){var k=g[1];if(1===k)return g[7]=c,g[1]=$CLJS.r(c)?3:4,$CLJS.X;if(2===k){k=g[2];var l=$CLJS.Wk(b);g[8]=k;return $CLJS.Iy(g,l)}return 3===k?(k=g[7],g[2]=k,g[1]=5,$CLJS.X):4===k?(g[2]=$CLJS.ng,g[1]=5,$CLJS.X):5===k?$CLJS.Jy(g,2,b,g[2]):null}return function(){function g(m){for(;;){a:try{for(;;){var p=h(m);if(!$CLJS.R(p,$CLJS.X)){var u=p;break a}}}catch(v){u=v;m[2]=u;if($CLJS.B(m[4]))m[1]=
$CLJS.C(m[4]);else throw u;u=$CLJS.X}if(!$CLJS.R(u,$CLJS.X))return u}}function k(){var m=[null,null,null,null,null,null,null,null,null];m[0]=l;m[1]=1;return m}var l=null;l=function(m){switch(arguments.length){case 0:return k.call(this);case 1:return g.call(this,m)}throw Error("Invalid arity: "+arguments.length);};l.N=k;l.h=g;return l}()}(),f=function(){var h=e();h[6]=d;return h}();return $CLJS.fy(f)});return d}).catch(function(c){var d=$CLJS.Fl(1);$CLJS.gl(function(){var e=function(){function h(g){var k=
g[1];return 1===k?(g[7]=c,g[1]=$CLJS.r(c)?3:4,$CLJS.X):2===k?(g[8]=g[2],$CLJS.Iy(g,b)):3===k?(k=g[7],g[2]=k,g[1]=5,$CLJS.X):4===k?(g[2]=$CLJS.ng,g[1]=5,$CLJS.X):5===k?$CLJS.Jy(g,2,b,g[2]):null}return function(){function g(m){for(;;){a:try{for(;;){var p=h(m);if(!$CLJS.R(p,$CLJS.X)){var u=p;break a}}}catch(v){u=v;m[2]=u;if($CLJS.B(m[4]))m[1]=$CLJS.C(m[4]);else throw u;u=$CLJS.X}if(!$CLJS.R(u,$CLJS.X))return u}}function k(){var m=[null,null,null,null,null,null,null,null,null];m[0]=l;m[1]=1;return m}
var l=null;l=function(m){switch(arguments.length){case 0:return k.call(this);case 1:return g.call(this,m)}throw Error("Invalid arity: "+arguments.length);};l.N=k;l.h=g;return l}()}(),f=function(){var h=e();h[6]=d;return h}();return $CLJS.fy(f)});return d});return b};
$CLJS.YU=function(){var a=$CLJS.Fl(1);$CLJS.gl(function(){var b=function(){function d(e){var f=e[1];return 7===f?(f=$CLJS.IU.close(),e[2]=f,e[1]=9,$CLJS.X):1===f?(e[2]=null,e[1]=2,$CLJS.X):4===f?(e[2]=e[2],e[1]=3,$CLJS.X):6===f?(f=$CLJS.QU(e[2]),e[4]=$CLJS.Fc(e[4]),e[2]=f,e[1]=3,$CLJS.X):3===f?$CLJS.Iy(e,e[2]):2===f?(e[4]=$CLJS.be(5,e[4]),e[1]=$CLJS.r($CLJS.IU)?7:8,$CLJS.X):9===f?(f=XU(e[2]),$CLJS.Ky(e,6,f)):5===f?(e[4]=$CLJS.Fc(e[4]),e[5]=e[2],e[1]=4,e[5]=null,$CLJS.X):8===f?(f=new Promise(function(){return function(h){return h.N?
h.N():h.call(null)}}()),e[2]=f,e[1]=9,$CLJS.X):null}return function(){function e(g){for(;;){a:try{for(;;){var k=d(g);if(!$CLJS.R(k,$CLJS.X)){var l=k;break a}}}catch(m){l=m;g[2]=l;if($CLJS.B(g[4]))g[1]=$CLJS.C(g[4]);else throw l;l=$CLJS.X}if(!$CLJS.R(l,$CLJS.X))return l}}function f(){var g=[null,null,null,null,null,null,null];g[0]=h;g[1]=1;return g}var h=null;h=function(g){switch(arguments.length){case 0:return f.call(this);case 1:return e.call(this,g)}throw Error("Invalid arity: "+arguments.length);
};h.N=f;h.h=e;return h}()}(),c=function(){var d=b();d[6]=a;return d}();return $CLJS.fy(c)});return a};$CLJS.ZU=function(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;c=arguments[0];b=$CLJS.xe.g($CLJS.ye,1<b.length?new $CLJS.Bc(b.slice(1),0,null):null);c=$CLJS.rL(c);d=c.read;b=$CLJS.Ql.h(b);return d.call(c,$CLJS.r(b)?b:"utf8")};
$U=function(a,b){$CLJS.FU($CLJS.I(["error publishing to %s:  %s".message]));$CLJS.FU($CLJS.I(["error publishing to %s:  %s".stack]));return $CLJS.FU($CLJS.I([$CLJS.xe.l($CLJS.Sl,a,$CLJS.Hh.g(function(c){return $CLJS.r(c)?c:null},b))]))};$CLJS.aV=function(a,b){return $CLJS.xe.l($CLJS.EU,$CLJS.tv,$CLJS.I([$CLJS.xe.l($CLJS.Sl,a,$CLJS.Hh.g(function(c){return $CLJS.r(c)?c:null},b))]))};
$CLJS.bV=function(a){return new Promise(function(b,c){var d=$CLJS.Fl(1);$CLJS.gl(function(){var e=function(){function h(g){var k=g[1];if(7===k)return k=g[7],k=b.h?b.h(k):b.call(null,k),g[2]=k,g[1]=9,$CLJS.X;if(1===k)return g[2]=null,g[1]=2,$CLJS.X;if(4===k){var l=g[2];k=$CLJS.FU($CLJS.I([l," js Promise will reject"]));var m=$CLJS.FU($CLJS.I([a]));l=$CLJS.Tm([$CLJS.Au,$CLJS.$i],["failure to process chan",l]);l=$CLJS.Nl(l);l=c.h?c.h(l):c.call(null,l);g[8]=k;g[9]=m;g[2]=l;g[1]=3;return $CLJS.X}return 6===
k?(k=g[2],g[7]=k,g[1]=$CLJS.r(k)?7:8,$CLJS.X):3===k?$CLJS.Iy(g,g[2]):2===k?(g[4]=$CLJS.be(5,g[4]),$CLJS.Ky(g,6,a)):9===k?(k=g[2],g[4]=$CLJS.Fc(g[4]),g[2]=k,g[1]=3,$CLJS.X):5===k?(g[4]=$CLJS.Fc(g[4]),g[5]=g[2],g[1]=4,g[5]=null,$CLJS.X):8===k?(k=$CLJS.UU($CLJS.I(["reject nil on chan-\x3epromise"])),m=$CLJS.Tm([$CLJS.Au],["nil value on channel"]),m=$CLJS.Nl(m),m=c.h?c.h(m):c.call(null,m),g[10]=k,g[2]=m,g[1]=9,$CLJS.X):null}return function(){function g(m){for(;;){a:try{for(;;){var p=h(m);if(!$CLJS.R(p,
$CLJS.X)){var u=p;break a}}}catch(v){u=v;m[2]=u;if($CLJS.B(m[4]))m[1]=$CLJS.C(m[4]);else throw u;u=$CLJS.X}if(!$CLJS.R(u,$CLJS.X))return u}}function k(){var m=[null,null,null,null,null,null,null,null,null,null,null];m[0]=l;m[1]=1;return m}var l=null;l=function(m){switch(arguments.length){case 0:return k.call(this);case 1:return g.call(this,m)}throw Error("Invalid arity: "+arguments.length);};l.N=k;l.h=g;return l}()}(),f=function(){var h=e();h[6]=d;return h}();return $CLJS.fy(f)});return d})};
cV=function(a){$CLJS.Ch($CLJS.Nh(a,$CLJS.Ya()))};$CLJS.dV=function(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;c=arguments[0];b=$CLJS.ze(1<b.length?new $CLJS.Bc(b.slice(1),0,null):null);b=$CLJS.M.l(b,$CLJS.yi,!0);return $CLJS.Hz(JSON.parse(c),$CLJS.I([$CLJS.yi,b]))};$CLJS.eV=function(a){return $CLJS.TU(a,function(b){return $CLJS.r(b)?$CLJS.Hz(b,$CLJS.I([$CLJS.yi,!0])):$CLJS.wv},function(b){return new $CLJS.q(null,1,[$CLJS.vv,b],null)})};
fV=function(a){return $CLJS.Em(a)?$CLJS.SD(function(b){return $CLJS.r(b instanceof $CLJS.y?$CLJS.de(b):!1)?$CLJS.Oh.h($CLJS.oh(b)):$CLJS.Em(b)&&$CLJS.G.g($CLJS.Ki,$CLJS.C(b))&&$CLJS.G.g(new $CLJS.T(null,1,5,$CLJS.U,[$CLJS.Z],null),$CLJS.ed(b))?$CLJS.Om(b):b},a):$CLJS.r(a instanceof $CLJS.y?$CLJS.de(a):!1)?$CLJS.Oh.h($CLJS.oh(a)):a};
$CLJS.gV=function(a,b){var c=$CLJS.Jf,d=$CLJS.bM(a);d=$CLJS.r(d)?new $CLJS.T(null,1,5,$CLJS.U,[d],null):$CLJS.Jf;var e=$CLJS.Jf;c=$CLJS.SL($CLJS.jM.h(a),c,d,e,b);return $CLJS.r(c)?$CLJS.nd(c)?null:new $CLJS.q(null,3,[$CLJS.aO,c,$CLJS.xN,a,$CLJS.ON,b],null):null};
$CLJS.hV=function(a){if($CLJS.r(a)){var b=WU(function(c){return-$CLJS.F($CLJS.Yn.h(c))},WU(function(c){return-$CLJS.F($CLJS.No.h(c))},$CLJS.aO.h(a)));return $CLJS.ak.v($CLJS.I([function(){var c=new $CLJS.Qa,d=$CLJS.Za,e=$CLJS.$a;$CLJS.Za=!0;$CLJS.$a=function(Pc){return c.append(Pc)};try{for(var f=$CLJS.B(b),h=null,g=0,k=0;;)if(k<g){var l=h.La(null,k),m=$CLJS.ze(l),p=m,u=$CLJS.M.g(m,$CLJS.Yn),v=$CLJS.M.g(m,$CLJS.pM),A=$CLJS.M.g(m,$CLJS.Ci),z=$CLJS.M.g(m,$CLJS.rO),E=$CLJS.M.g(m,$CLJS.qM),J=$CLJS.M.g(m,
$CLJS.No);cV($CLJS.I([A]));$CLJS.ak.v($CLJS.I([" - failed: "]));$CLJS.r(z)?$CLJS.ak.v($CLJS.I([z])):cV($CLJS.I([fV(v)]));$CLJS.nd(J)||$CLJS.ak.v($CLJS.I([[" in: ",$CLJS.Zj.v($CLJS.I([J]))].join("")]));$CLJS.nd(u)||$CLJS.ak.v($CLJS.I([[" at: ",$CLJS.Zj.v($CLJS.I([u]))].join("")]));$CLJS.nd(E)||$CLJS.ak.v($CLJS.I([[" spec: ",$CLJS.Zj.v($CLJS.I([$CLJS.Om(E)]))].join("")]));var O=$CLJS.B(p);p=null;for(var P=0,S=0;;)if(S<P){var ea=p.La(null,S),ba=$CLJS.K(ea,0,null),fa=$CLJS.K(ea,1,null);$CLJS.r(function(){var Pc=
new $CLJS.lh(null,new $CLJS.q(null,6,[$CLJS.Yn,null,$CLJS.pM,null,$CLJS.qM,null,$CLJS.Ci,null,$CLJS.rO,null,$CLJS.No,null],null),null);return Pc.h?Pc.h(ba):Pc.call(null,ba)}())||($CLJS.ak.v($CLJS.I(["\n\t",$CLJS.Zj.v($CLJS.I([ba]))," "])),cV($CLJS.I([fa])));S+=1}else{var ka=$CLJS.B(O);if(ka){var ma=ka;if($CLJS.ud(ma)){var pa=$CLJS.gc(ma),Ha=$CLJS.hc(ma);ma=pa;var za=$CLJS.F(pa);O=Ha;p=ma;P=za}else{var La=$CLJS.C(ma),kb=$CLJS.K(La,0,null),Gc=$CLJS.K(La,1,null);$CLJS.r(function(){var Pc=new $CLJS.lh(null,
new $CLJS.q(null,6,[$CLJS.Yn,null,$CLJS.pM,null,$CLJS.qM,null,$CLJS.Ci,null,$CLJS.rO,null,$CLJS.No,null],null),null);return Pc.h?Pc.h(kb):Pc.call(null,kb)}())||($CLJS.ak.v($CLJS.I(["\n\t",$CLJS.Zj.v($CLJS.I([kb]))," "])),cV($CLJS.I([Gc])));O=$CLJS.D(ma);p=null;P=0}S=0}else break}$CLJS.Mm(null);k+=1}else{var dd=$CLJS.B(f);if(dd){p=dd;if($CLJS.ud(p)){var ge=$CLJS.gc(p),kd=$CLJS.hc(p);p=ge;var Yd=$CLJS.F(ge);f=kd;h=p;g=Yd}else{var Rd=$CLJS.C(p),Zd=$CLJS.ze(Rd);P=Zd;var Fe=$CLJS.M.g(Zd,$CLJS.Yn),Ge=$CLJS.M.g(Zd,
$CLJS.pM),Ub=$CLJS.M.g(Zd,$CLJS.Ci),ub=$CLJS.M.g(Zd,$CLJS.rO),$d=$CLJS.M.g(Zd,$CLJS.qM),Ef=$CLJS.M.g(Zd,$CLJS.No);cV($CLJS.I([Ub]));$CLJS.ak.v($CLJS.I([" - failed: "]));$CLJS.r(ub)?$CLJS.ak.v($CLJS.I([ub])):cV($CLJS.I([fV(Ge)]));$CLJS.nd(Ef)||$CLJS.ak.v($CLJS.I([[" in: ",$CLJS.Zj.v($CLJS.I([Ef]))].join("")]));$CLJS.nd(Fe)||$CLJS.ak.v($CLJS.I([[" at: ",$CLJS.Zj.v($CLJS.I([Fe]))].join("")]));$CLJS.nd($d)||$CLJS.ak.v($CLJS.I([[" spec: ",$CLJS.Zj.v($CLJS.I([$CLJS.Om($d)]))].join("")]));var Ff=$CLJS.B(P);
P=null;for(ma=S=0;;)if(ma<S){var cg=P.La(null,ma),of=$CLJS.K(cg,0,null),Ze=$CLJS.K(cg,1,null);$CLJS.r(function(){var Pc=new $CLJS.lh(null,new $CLJS.q(null,6,[$CLJS.Yn,null,$CLJS.pM,null,$CLJS.qM,null,$CLJS.Ci,null,$CLJS.rO,null,$CLJS.No,null],null),null);return Pc.h?Pc.h(of):Pc.call(null,of)}())||($CLJS.ak.v($CLJS.I(["\n\t",$CLJS.Zj.v($CLJS.I([of]))," "])),cV($CLJS.I([Ze])));ma+=1}else{var Dg=$CLJS.B(Ff);if(Dg){var he=Dg;if($CLJS.ud(he)){var Eg=$CLJS.gc(he),hh=$CLJS.hc(he);he=Eg;var Ah=$CLJS.F(Eg);
Ff=hh;P=he;S=Ah}else{var pf=$CLJS.C(he),Sd=$CLJS.K(pf,0,null),wi=$CLJS.K(pf,1,null);$CLJS.r(function(){var Pc=new $CLJS.lh(null,new $CLJS.q(null,6,[$CLJS.Yn,null,$CLJS.pM,null,$CLJS.qM,null,$CLJS.Ci,null,$CLJS.rO,null,$CLJS.No,null],null),null);return Pc.h?Pc.h(Sd):Pc.call(null,Sd)}())||($CLJS.ak.v($CLJS.I(["\n\t",$CLJS.Zj.v($CLJS.I([Sd]))," "])),cV($CLJS.I([wi])));Ff=$CLJS.D(he);P=null;S=0}ma=0}else break}$CLJS.Mm(null);f=$CLJS.D(p);h=null;g=0}k=0}else break}}finally{$CLJS.$a=e,$CLJS.Za=d}return $CLJS.t.h(c)}()]))}return $CLJS.Wm($CLJS.I(["Success!"]))};
$CLJS.iV=function(a){var b=$CLJS.Fl(null),c=$CLJS.Fl(1);$CLJS.gl(function(){var d=function(){function f(h){var g=h[1];if(7===g)return h[4]=$CLJS.be(10,h[4]),g=!$CLJS.oM($CLJS.YO,a),h[1]=g?11:12,$CLJS.X;if(1===g)return h[2]=null,h[1]=2,$CLJS.X;if(4===g)return g=$CLJS.Tm([$CLJS.qT,$CLJS.ET],["unable to send",h[2]]),g=$CLJS.Xj.v($CLJS.I([a,g])),$CLJS.Jy(h,5,b,g);if(15===g){var k=h[7];g=h[2];k=$CLJS.t.h(k);k=$CLJS.aV("invalid response spec:  %s",$CLJS.I([k]));h[8]=g;g=h;g[2]=k;g[1]=13;return $CLJS.X}if(13===
g)return g=h[2],h[4]=$CLJS.Fc(h[4]),h[2]=g,h[1]=8,$CLJS.X;if(6===g)return h[4]=$CLJS.Fc(h[4]),g=h,g[5]=g[2],g[1]=4,g[5]=null,$CLJS.X;if(17===g)throw h[4]=$CLJS.Fc(h[4]),g=h,k=g[2],g[5]=k,k;if(3===g)return $CLJS.Iy(h,h[2]);if(12===g)return h[2]=null,h[1]=13,$CLJS.X;if(2===g)return h[4]=$CLJS.be(6,h[4]),h[2]=null,h[1]=7,$CLJS.X;if(19===g)return g=h[2],h[4]=$CLJS.Fc(h[4]),h[2]=g,h[1]=3,$CLJS.X;if(11===g){var l=h[9];k=h[10];k=h[7];var m=new $CLJS.Qa;g=$CLJS.Za;k=$CLJS.$a;var p=function(){return function(u){return m.append(u)}}();
l=$CLJS.Za=!0;p=$CLJS.$a=p;h[9]=k;h[10]=g;h[7]=m;h[11]=p;h[12]=l;g=h;g[2]=null;g[1]=14;return $CLJS.X}return 9===g?(k=h[2],g=$CLJS.FU($CLJS.I(["unable to verify :response/message"])),h[13]=k,k=h,k[2]=g,k[1]=8,$CLJS.X):5===g?(h[2]=h[2],h[1]=3,$CLJS.X):14===g?(h[4]=$CLJS.be(16,h[4]),h[4]=$CLJS.be(17,h[4]),g=$CLJS.hV.call(null,$CLJS.gV($CLJS.YO,a)),h[4]=$CLJS.Fc(h[4]),h[2]=g,h[1]=16,$CLJS.X):16===g?(l=h[9],k=h[10],h[4]=$CLJS.Fc(h[4]),g=h[2],l=$CLJS.$a=l,k=$CLJS.Za=k,function(){var u=h[5];if($CLJS.r(u))throw u;
return null}(),h[14]=l,h[15]=k,k=h,k[2]=g,k[1]=15,$CLJS.X):10===g?(h[4]=$CLJS.Fc(h[4]),g=h,g[5]=g[2],g[1]=9,g[5]=null,$CLJS.X):18===g?(g=$CLJS.xe.l($CLJS.EU,$CLJS.tv,$CLJS.I(["send-on-response-channel ",a," with promise ",h[2]])),h[16]=g,$CLJS.Jy(h,19,b,a)):8===g?(g=h[2],k=$CLJS.rT.h(a),l=$CLJS.Nl(a),k=k.h?k.h(l):k.call(null,l),k=$CLJS.eV(k),h[17]=g,$CLJS.Ky(h,18,k)):null}return function(){function h(l){for(;;){a:try{for(;;){var m=f(l);if(!$CLJS.R(m,$CLJS.X)){var p=m;break a}}}catch(u){p=u;l[2]=p;
if($CLJS.B(l[4]))l[1]=$CLJS.C(l[4]);else throw p;p=$CLJS.X}if(!$CLJS.R(p,$CLJS.X))return p}}function g(){var l=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];l[0]=k;l[1]=1;return l}var k=null;k=function(l){switch(arguments.length){case 0:return g.call(this);case 1:return h.call(this,l)}throw Error("Invalid arity: "+arguments.length);};k.N=g;k.h=h;return k}()}(),e=function(){var f=d();f[6]=c;return f}();return $CLJS.fy(e)});return b};
$CLJS.jV=function(a){return $CLJS.db($CLJS.hQ.h(a))||$CLJS.nd($CLJS.hQ.h(a))?$CLJS.jn.l($CLJS.az(a,$CLJS.hQ,$CLJS.kl(new $CLJS.T(null,1,5,$CLJS.U,[$CLJS.Xj.v($CLJS.I([$CLJS.Xi.h(a),new $CLJS.q(null,1,[$CLJS.qQ,"slack"],null)]))],null))),new $CLJS.T(null,2,5,$CLJS.U,[$CLJS.hQ,0],null),function(b){return null!=$CLJS.Ti.h(b)?$CLJS.SU(b,$CLJS.Ti,$CLJS.Bj,$CLJS.Ei):b}):a};
$CLJS.kV=function(a){var b=$CLJS.db($CLJS.EK.h(a))&&$CLJS.db($CLJS.pi.h(a))?$CLJS.W.v(a,$CLJS.gQ,"1",$CLJS.I([$CLJS.oj,$CLJS.Xj.v($CLJS.I([$CLJS.Xj.v($CLJS.I([$CLJS.Ee,$CLJS.oj.h(a)])),$CLJS.r($CLJS.rB.h(a))?new $CLJS.q(null,1,[$CLJS.rj,$CLJS.rB.h(a)],null):null])),$CLJS.JP,function(){var c=$CLJS.iT.h(a);return $CLJS.r(c)?c:$CLJS.JP.h(a)}()])):a;b=$CLJS.r(function(){var c=$CLJS.on.h(a);return $CLJS.r(c)?$CLJS.G.g("webhook_raw_payload",$CLJS.on.h(a)):c}())?$CLJS.W.l(b,$CLJS.zT,"ingestion"):b;b=$CLJS.r(function(){var c=
$CLJS.on.h(a);return $CLJS.r(c)?$CLJS.G.g("datalog_subscription_result",$CLJS.on.h(a)):c}())?$CLJS.W.v(b,$CLJS.zT,$CLJS.Ri.h($CLJS.DQ.h(a)),$CLJS.I([$CLJS.Yt,$CLJS.mP.h($CLJS.DQ.h(a))])):b;return $CLJS.r($CLJS.EK.h(a))?$CLJS.W.v(b,$CLJS.gQ,"1",$CLJS.I([$CLJS.zT,$CLJS.AT.h($CLJS.EK.h(a)),$CLJS.JP,$CLJS.JP.h($CLJS.EK.h(a)),$CLJS.oj,new $CLJS.q(null,2,[$CLJS.rj,$CLJS.rB.h($CLJS.EK.h(a)),$CLJS.Ri,$CLJS.iU.h($CLJS.EK.h(a))],null)])):b};
$CLJS.lV=function(a){return function(b){var c=$CLJS.Fl(1);$CLJS.gl(function(){var d=function(){function f(h){var g=h[1];if(7===g){var k=h[7];g=[$CLJS.TT];var l=$CLJS.TT.h(k);l=[$CLJS.oh(l)];g=$CLJS.Tm(g,l);h[2]=g;h[1]=9;return $CLJS.X}if(1===g)return g=a.h?a.h(b):a.call(null,b),$CLJS.Ky(h,2,g);if(4===g)return k=h[7],h[2]=k,h[1]=6,$CLJS.X;if(6===g)return k=h[7],l=h[2],g=$CLJS.TT.h(k),h[8]=l,h[1]=$CLJS.r(g)?7:8,$CLJS.X;if(3===g)return g=h[9],h[10]=h[2],$CLJS.Iy(h,g);if(2===g){l=$CLJS.ze(h[2]);k=$CLJS.M.g(l,
$CLJS.HT);g=$CLJS.XD(b,new $CLJS.T(null,8,5,$CLJS.U,[$CLJS.rT,$CLJS.JP,$CLJS.gQ,$CLJS.hT,$CLJS.oj,$CLJS.pi,$CLJS.Xi,$CLJS.hQ],null));var m=$CLJS.oM($CLJS.HT,k);h[9]=l;h[7]=k;h[11]=g;h[1]=m?4:5;return $CLJS.X}return 9===g?(g=h[11],l=h[8],l=$CLJS.Xj.v($CLJS.I([l,h[2]])),g=$CLJS.W.l(g,$CLJS.ni,l),g=$CLJS.W.l(g,$CLJS.FP,"application/x-atomist-status+json"),g=$CLJS.jV(g),g=$CLJS.iV(g),$CLJS.Ky(h,3,g)):5===g?(g=$CLJS.Tm([$CLJS.ui,$CLJS.rO],[1,":atomist/status must contain an integer code and a string reason"]),
h[2]=g,h[1]=6,$CLJS.X):8===g?(h[2]=null,h[1]=9,$CLJS.X):null}return function(){function h(l){for(;;){a:try{for(;;){var m=f(l);if(!$CLJS.R(m,$CLJS.X)){var p=m;break a}}}catch(u){p=u;l[2]=p;if($CLJS.B(l[4]))l[1]=$CLJS.C(l[4]);else throw p;p=$CLJS.X}if(!$CLJS.R(p,$CLJS.X))return p}}function g(){var l=[null,null,null,null,null,null,null,null,null,null,null,null];l[0]=k;l[1]=1;return l}var k=null;k=function(l){switch(arguments.length){case 0:return g.call(this);case 1:return h.call(this,l)}throw Error("Invalid arity: "+
arguments.length);};k.N=g;k.h=h;return k}()}(),e=function(){var f=d();f[6]=c;return f}();return $CLJS.fy(e)});return c}};mV=function(a,b,c){var d=$CLJS.LU.topic(a,$CLJS.Nl(new $CLJS.q(null,1,[$CLJS.KU,!0],null)));c=Buffer.from(JSON.stringify(c),"utf8");return d.publishMessage($CLJS.Nl(new $CLJS.q(null,2,[$CLJS.Yt,c,$CLJS.JU,b],null))).then(function(e){return $CLJS.aV("published to %s:  %s",$CLJS.I([a,e]))}).catch(function(e){return $U(a,$CLJS.I([e]))})};
nV=function(){return $CLJS.G.g("true",process.env.IN_REPL)?null:process.exit(0)};OU=function OU(a){switch(arguments.length){case 1:return OU.h(arguments[0]);case 2:return OU.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return OU.v(arguments[0],arguments[1],new $CLJS.Bc(c.slice(2),0,null))}};OU.h=function(){return!0};OU.g=function(a,b){return!$CLJS.G.g(a,b)};
OU.v=function(a,b,c){if($CLJS.G.g(a,b))return!1;a=$CLJS.Xm([a,b]);for(b=c;;){var d=$CLJS.C(b);c=$CLJS.D(b);if($CLJS.r(b)){if($CLJS.N(a,d))return!1;a=$CLJS.Wd.g(a,d);b=c}else return!0}};OU.aa=function(a){var b=$CLJS.C(a),c=$CLJS.D(a);a=$CLJS.C(c);c=$CLJS.D(c);return this.v(b,a,c)};OU.ba=2;
$CLJS.sO.prototype.tc=$CLJS.Ia(50,function(a,b,c,d,e){var f=this;if($CLJS.rd(e)){var h=$CLJS.w($CLJS.UL);return $CLJS.xe.l($CLJS.Ej,function(){var g=$CLJS.B(NU($CLJS.Kd,$CLJS.Hh.l(function(k,l){return $CLJS.r(k.h?k.h(e):k.call(null,e))?null:l},f.gh,f.hh)));return g?$CLJS.Hh.g(function(k){return new $CLJS.q(null,5,[$CLJS.Yn,b,$CLJS.pM,k,$CLJS.Ci,e,$CLJS.qM,c,$CLJS.No,d],null)},g):null}(),$CLJS.Hh.g(function(g){var k=$CLJS.K(g,0,null);g=$CLJS.K(g,1,null);var l;(l=!$CLJS.N(h,f.hc.h?f.hc.h(k):f.hc.call(null,
k)))||(l=f.hc.h?f.hc.h(k):f.hc.call(null,k),l=!$CLJS.hM($CLJS.nM(l,g,k,null)));return l?null:$CLJS.rM(f.hc.h?f.hc.h(k):f.hc.call(null,k),f.hc.h?f.hc.h(k):f.hc.call(null,k),$CLJS.Wd.g(b,k),c,$CLJS.Wd.g(d,k),g)},$CLJS.B(e)))}return new $CLJS.T(null,1,5,$CLJS.U,[new $CLJS.q(null,5,[$CLJS.Yn,b,$CLJS.pM,$CLJS.CN,$CLJS.Ci,e,$CLJS.qM,c,$CLJS.No,d],null)],null)});
$CLJS.vM.prototype.tc=$CLJS.Ia(49,function(a,b,c,d,e){return $CLJS.hM($CLJS.nM(this.pc,e,this.form,this.zf))?new $CLJS.T(null,1,5,$CLJS.U,[new $CLJS.q(null,5,[$CLJS.Yn,b,$CLJS.pM,this.form,$CLJS.Ci,e,$CLJS.qM,c,$CLJS.No,d],null)],null):null});
$CLJS.MM.prototype.tc=$CLJS.Ia(48,function(a,b,c,d,e){var f=this;a=PU(e,f.kind,f.bh,f.Xg,f.count,f.eh,f.dh,b,c,d);return $CLJS.r(a)?a:$CLJS.xe.g($CLJS.Ej,function(){var h=NU($CLJS.Kd,$CLJS.Hh.l(function(k,l){k=f.Ff.g?f.Ff.g(k,l):f.Ff.call(null,k,l);return $CLJS.r(f.nf.h?f.nf.h(l):f.nf.call(null,l))?null:$CLJS.rM(f.form,f.pc,b,c,$CLJS.Wd.g(d,k),l)},$CLJS.Vl(0,Number.MAX_VALUE),e)),g=$CLJS.r(f.kg)?$CLJS.Kd:$CLJS.bf($CLJS.Hj,20);return g.h?g.h(h):g.call(null,h)}())});
$CLJS.tO.prototype.tc=$CLJS.Ia(47,function(a,b,c,d,e){if(null==e||$CLJS.qd(e))a:{a=this.yd;var f=$CLJS.B(e);e=$CLJS.B(f);$CLJS.C(e);$CLJS.D(e);e=a;var h=f;for(f=0;;){var g=$CLJS.B(h),k=$CLJS.C(g);g=$CLJS.D(g);if($CLJS.nd(h)){b=$CLJS.r($CLJS.tN(e))?null:$CLJS.yO($CLJS.sN(e),e,b,c,d,null);break a}k=$CLJS.uN(e,k);if($CLJS.r(k))h=g,f+=1,e=k;else{if($CLJS.RM(e)){b=$CLJS.G.g($CLJS.YL.h(e),$CLJS.gN)?$CLJS.yO($CLJS.sN(e),e,b,c,$CLJS.Wd.g(d,f),$CLJS.B(h)):new $CLJS.T(null,1,5,$CLJS.U,[new $CLJS.q(null,6,[$CLJS.Yn,
b,$CLJS.rO,"Extra input",$CLJS.pM,$CLJS.sN(a),$CLJS.Ci,h,$CLJS.qM,c,$CLJS.No,$CLJS.Wd.g(d,f)],null)],null);break a}a=$CLJS.yO($CLJS.sN(e),e,b,c,$CLJS.Wd.g(d,f),$CLJS.B(h));b=$CLJS.r(a)?a:new $CLJS.T(null,1,5,$CLJS.U,[new $CLJS.q(null,6,[$CLJS.Yn,b,$CLJS.rO,"Extra input",$CLJS.pM,$CLJS.sN(e),$CLJS.Ci,h,$CLJS.qM,c,$CLJS.No,$CLJS.Wd.g(d,f)],null)],null);break a}}}else b=new $CLJS.T(null,1,5,$CLJS.U,[new $CLJS.q(null,5,[$CLJS.Yn,b,$CLJS.pM,MU($CLJS.B($CLJS.Ej.v(new $CLJS.Td(null,$CLJS.XN,null,1,null),
new $CLJS.Td(null,$CLJS.Kf(MU($CLJS.B($CLJS.Ej.h(new $CLJS.Td(null,$CLJS.Z,null,1,null))))),null,1,null),$CLJS.I([new $CLJS.Td(null,MU($CLJS.B($CLJS.Ej.v(new $CLJS.Td(null,$CLJS.ZN,null,1,null),new $CLJS.Td(null,MU($CLJS.B($CLJS.Ej.g(new $CLJS.Td(null,$CLJS.UN,null,1,null),new $CLJS.Td(null,$CLJS.Z,null,1,null)))),null,1,null),$CLJS.I([new $CLJS.Td(null,MU($CLJS.B($CLJS.Ej.g(new $CLJS.Td(null,$CLJS.GN,null,1,null),new $CLJS.Td(null,$CLJS.Z,null,1,null)))),null,1,null)])))),null,1,null)])))),$CLJS.Ci,
e,$CLJS.qM,c,$CLJS.No,d],null)],null);return b});$CLJS.CO.prototype.tc=$CLJS.Ia(46,function(a,b,c,d,e){return $CLJS.xe.g($CLJS.Ej,$CLJS.Hh.l(function(f,h){return $CLJS.rM(f,h,b,c,d,e)},this.forms,this.ld))});$CLJS.BO.prototype.tc=$CLJS.Ia(45,function(a,b,c,d,e){return $CLJS.hM($CLJS.nM(this,e,$CLJS.VN,null))?$CLJS.xe.g($CLJS.Ej,$CLJS.Hh.ea(function(f,h,g){return $CLJS.hM($CLJS.nM(g,e,$CLJS.VN,null))?$CLJS.rM(h,g,$CLJS.Wd.g(b,f),c,d,e):null},this.keys,this.forms,this.ld)):null});
$CLJS.oV=function oV(a){switch(arguments.length){case 1:return oV.h(arguments[0]);case 2:return oV.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return oV.v(arguments[0],arguments[1],new $CLJS.Bc(c.slice(2),0,null))}};$CLJS.oV.h=function(a){return $CLJS.rL(a)};
$CLJS.oV.g=function(a,b){a=$CLJS.rL(a);b=$CLJS.rL(b);if($CLJS.r(b.isAbsolute()))throw Error(["IllegalArgumentException: ",$CLJS.t.h(b)," is not a relative path"].join(""));b=b.getPath();return new $CLJS.lL($CLJS.wL(a,b))};$CLJS.oV.v=function(a,b,c){return $CLJS.Dd($CLJS.oV,$CLJS.oV.g(a,b),c)};$CLJS.oV.aa=function(a){var b=$CLJS.C(a),c=$CLJS.D(a);a=$CLJS.C(c);c=$CLJS.D(c);return this.v(b,a,c)};$CLJS.oV.ba=2;
var pV=new $CLJS.Q(null,"topic","topic",-1960480691),qV=new $CLJS.Q(null,"Tag","Tag",-1948095582),rV=new $CLJS.Q(null,"bucket-name","bucket-name",-971156135),sV=new $CLJS.Q(null,"graphql-endpoint","graphql-endpoint",-39630322),tV=new $CLJS.Q(null,"payload","payload",-383036092);$CLJS.uV=function(a){return function(b){return function(c){var d=$CLJS.Dd(function(e,f){var h=$CLJS.B(f);f=$CLJS.C(h);h=$CLJS.D(h);return $CLJS.xe.l(f,e,h)},b,a);return d.h?d.h(c):d.call(null,c)}}}($CLJS.I([new $CLJS.T(null,1,5,$CLJS.U,[function(a){return function(b){var c=$CLJS.Fl(1);$CLJS.gl(function(){var d=function(){function f(h){var g=h[1];if(7===g)return g=h[2],h[4]=$CLJS.Fc(h[4]),h[2]=g,h[1]=3,$CLJS.X;if(20===g)return h[2]=h[7],h[1]=22,$CLJS.X;if(27===g)return g=$CLJS.YU(),$CLJS.Ky(h,30,g);
if(1===g)return h[2]=null,h[1]=2,$CLJS.X;if(24===g)return g=!$CLJS.G.g("true",process.env.LOCAL_SKILL_RUNNER),h[2]=g,h[1]=26,$CLJS.X;if(4===g)return h[2]=h[2],h[1]=3,$CLJS.X;if(15===g)return h[2]="missing",h[1]=16,$CLJS.X;if(21===g)return h[2]="missing",h[1]=22,$CLJS.X;if(13===g){g=h[2];var k=$CLJS.PO.h(b);k=$CLJS.TP.h(k);h[9]=g;h[8]=k;h[1]=$CLJS.r(k)?14:15;return $CLJS.X}if(22===g)return g=h[10],k=h[11],g=$CLJS.HU("----\x3e starting %s/%s@%s %s %s %s (%s)",$CLJS.I([k,g,h[2],"api-cljs","0.5.69","2021-06-10T10:06:23Z",
"v0.5.69"])),k=a.h?a.h(b):a.call(null,b),h[12]=g,$CLJS.Ky(h,23,k);if(29===g)return g=h[2],h[4]=$CLJS.Fc(h[4]),h[2]=g,h[1]=7,$CLJS.X;if(6===g)return h[4]=$CLJS.be(10,h[4]),g=!$CLJS.G.g("true",process.env.LOCAL_SKILL_RUNNER),h[1]=g?11:12,$CLJS.X;if(28===g)return h[2]=null,h[1]=29,$CLJS.X;if(25===g)return h[2]=h[13],h[1]=26,$CLJS.X;if(17===g)return h[2]=h[14],h[1]=19,$CLJS.X;if(3===g)return $CLJS.Iy(h,h[2]);if(12===g)return h[2]=null,h[1]=13,$CLJS.X;if(2===g)return h[4]=$CLJS.be(5,h[4]),h[2]=null,h[1]=
6,$CLJS.X;if(23===g)return g=process.env.TOPIC,h[15]=h[2],h[13]=g,h[1]=$CLJS.r(g)?24:25,$CLJS.X;if(19===g)return g=h[2],k=$CLJS.PO.h(b),k=$CLJS.aB.h(k),h[7]=k,h[10]=g,h[1]=$CLJS.r(k)?20:21,$CLJS.X;if(11===g){g=$CLJS.iT.h(b);k=$CLJS.yU.h(b);var l=$CLJS.PO.h(b);l=$CLJS.rj.h(l);g=$CLJS.RU(g,"unknown",k,l);h[2]=g;h[1]=13;return $CLJS.X}return 9===g?(h[16]=h[2],h[2]=b,h[1]=7,$CLJS.X):5===g?(h[4]=$CLJS.Fc(h[4]),h[5]=h[2],h[1]=4,h[5]=null,$CLJS.X):14===g?(g=h[8],h[2]=g,h[1]=16,$CLJS.X):26===g?(h[1]=$CLJS.r(h[2])?
27:28,$CLJS.X):16===g?(k=h[2],g=$CLJS.PO.h(b),g=$CLJS.Ri.h(g),h[14]=g,h[11]=k,h[1]=$CLJS.r(g)?17:18,$CLJS.X):30===g?(h[2]=h[2],h[1]=29,$CLJS.X):10===g?(h[4]=$CLJS.Fc(h[4]),h[5]=h[2],h[1]=8,h[5]=null,$CLJS.X):18===g?(h[2]="missing",h[1]=19,$CLJS.X):8===g?(g=$CLJS.FU($CLJS.I([h[2]])),k=$CLJS.YU(),h[17]=g,$CLJS.Ky(h,9,k)):null}return function(){function h(l){for(;;){a:try{for(;;){var m=f(l);if(!$CLJS.R(m,$CLJS.X)){var p=m;break a}}}catch(u){p=u;l[2]=p;if($CLJS.B(l[4]))l[1]=$CLJS.C(l[4]);else throw p;
p=$CLJS.X}if(!$CLJS.R(p,$CLJS.X))return p}}function g(){var l=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];l[0]=k;l[1]=1;return l}var k=null;k=function(l){switch(arguments.length){case 0:return g.call(this);case 1:return h.call(this,l)}throw Error("Invalid arity: "+arguments.length);};k.N=g;k.h=h;return k}()}(),e=function(){var f=d();f[6]=c;return f}();return $CLJS.fy(e)});return c}}],null),new $CLJS.T(null,1,5,$CLJS.U,[function(a){function b(d){d=$CLJS.ze(d);
d=$CLJS.M.g(d,$CLJS.Yt);var e=$CLJS.Ri.h($CLJS.An.h($CLJS.C($CLJS.oU.h(d))));return $CLJS.r(e)?e:$CLJS.Ri.h($CLJS.An.h($CLJS.lQ.h($CLJS.C(qV.h(d)))))}function c(d){d=$CLJS.ze(d);d=$CLJS.M.g(d,$CLJS.Yt);var e=$CLJS.Pn.h($CLJS.An.h($CLJS.C($CLJS.oU.h(d))));return $CLJS.r(e)?e:$CLJS.Pn.h($CLJS.An.h($CLJS.lQ.h($CLJS.C(qV.h(d)))))}return function(d){var e=$CLJS.Fl(1);$CLJS.gl(function(){var f=function(){function g(k){var l=k[1];if(7===l){var m=k[7];l=k[8];var p=c(l);l=b(l);l=$CLJS.W.v(m,$CLJS.Pn,p,$CLJS.I([$CLJS.An,
l]));k[2]=l;k[1]=9;return $CLJS.X}if(1===l)return k[2]=null,k[1]=2,$CLJS.X;if(4===l)return k[2]=k[2],k[1]=3,$CLJS.X;if(6===l)return l=$CLJS.QU(k[2]),k[4]=$CLJS.Fc(k[4]),k[2]=l,k[1]=3,$CLJS.X;if(3===l)return $CLJS.Iy(k,k[2]);if(12===l)return l=k[2],l=a.h?a.h(l):a.call(null,l),$CLJS.Ky(k,6,l);if(2===l)return l=k[8],k[4]=$CLJS.be(5,k[4]),l=tV.h(d),l=$CLJS.oV.h(l),l=$CLJS.ZU(l),l=$CLJS.dV(l),l=$CLJS.kV(l),m=d,p=$CLJS.Yt.h(l),p=$CLJS.N(p,$CLJS.oU),k[7]=m,k[8]=l,k[1]=p?7:8,$CLJS.X;if(11===l)return m=k[9],
k[2]=m,k[1]=12,$CLJS.X;if(9===l)return m=k[2],k[9]=m,k[1]=10,$CLJS.X;if(5===l)return k[4]=$CLJS.Fc(k[4]),k[5]=k[2],k[1]=4,k[5]=null,$CLJS.X;if(10===l){m=k[9];l=k[8];p=[$CLJS.XA];var u=function(){return function(A){return $CLJS.G.g("atomist://api-key",$CLJS.Fn.h(A))}}(),v=$CLJS.sB.h(l);u=$CLJS.C($CLJS.Wl(u,v));u=[$CLJS.lB.h(u)];p=$CLJS.Tm(p,u);l=$CLJS.Xj.v($CLJS.I([m,l,p]));k[2]=l;k[1]=12;return $CLJS.X}return 8===l?(m=k[7],k[2]=m,k[1]=9,$CLJS.X):null}return function(){function k(p){for(;;){a:try{for(;;){var u=
g(p);if(!$CLJS.R(u,$CLJS.X)){var v=u;break a}}}catch(A){v=A;p[2]=v;if($CLJS.B(p[4]))p[1]=$CLJS.C(p[4]);else throw v;v=$CLJS.X}if(!$CLJS.R(v,$CLJS.X))return v}}function l(){var p=[null,null,null,null,null,null,null,null,null,null];p[0]=m;p[1]=1;return p}var m=null;m=function(p){switch(arguments.length){case 0:return l.call(this);case 1:return k.call(this,p)}throw Error("Invalid arity: "+arguments.length);};m.N=l;m.h=k;return m}()}(),h=function(){var g=f();g[6]=e;return g}();return $CLJS.fy(h)});return e}}],
null),new $CLJS.T(null,1,5,$CLJS.U,[function(a){var b=function(){function c(e){var f=null;if(0<arguments.length){f=0;for(var h=Array(arguments.length-0);f<h.length;)h[f]=arguments[f+0],++f;f=new $CLJS.Bc(h,0,null)}return d.call(this,f)}function d(e){return $CLJS.Dd(function(f,h){return $CLJS.r(f)?f:$CLJS.Oa(process.env,h)},!1,e)}c.ba=0;c.aa=function(e){e=$CLJS.B(e);return d(e)};c.v=d;return c}();return function(c){var d=$CLJS.Fl(1);$CLJS.gl(function(){var e=function(){function h(g){var k=g[1];if(7===
k)return k=g[7],g[2]=k,g[1]=8,$CLJS.X;if(20===k){k=g[2];var l=b("ATOMIST_CORRELATION_ID");g[8]=k;g[1]=$CLJS.r(l)?21:22;return $CLJS.X}if(27===k){k=g[9];var m=g[10];k=sV.h(m);g[9]=k;g[1]=$CLJS.r(k)?30:31;return $CLJS.X}if(1===k)return g[2]=null,g[1]=2,$CLJS.X;if(24===k)return k=g[11],m=g[10],k=pV.h(m),g[11]=k,g[1]=$CLJS.r(k)?27:28,$CLJS.X;if(39===k)return k=!$CLJS.G.g("true",process.env.LOCAL_SKILL_RUNNER),g[1]=k?43:44,$CLJS.X;if(4===k)return g[2]=g[2],g[1]=3,$CLJS.X;if(15===k)return k=g[12],l=b("ATOMIST_STORAGE",
"STORAGE"),l=$CLJS.Qm(/gs:\/\/(.*)/,l),l=$CLJS.H(l,1),k=$CLJS.W.l(k,rV,l),g[2]=k,g[1]=17,$CLJS.X;if(21===k)return k=g[8],l=b("ATOMIST_CORRELATION_ID"),k=$CLJS.W.l(k,$CLJS.iT,l),g[2]=k,g[1]=23,$CLJS.X;if(31===k)return k=g[9],g[2]=k,g[1]=32,$CLJS.X;if(32===k)return g[2]=g[2],g[1]=29,$CLJS.X;if(40===k)return m=g[10],k=$CLJS.Tm([$CLJS.ui,$CLJS.rO],[1,"environment is missing some of WORKSPACE_ID GRAPHQL_ENDPOINT ATOMIST_PAYLOAD TOPIC or ATOMIST_STORAGE"]),k=$CLJS.W.l(m,$CLJS.HT,k),g[2]=k,g[1]=41,$CLJS.X;
if(33===k)return k=g[13],m=g[10],k=rV.h(m),g[13]=k,g[1]=$CLJS.r(k)?36:37,$CLJS.X;if(13===k)return k=g[14],g[2]=k,g[1]=14,$CLJS.X;if(22===k)return k=g[8],g[2]=k,g[1]=23,$CLJS.X;if(36===k)return m=g[10],k=$CLJS.iT.h(m),g[2]=k,g[1]=38,$CLJS.X;if(41===k)return k=g[2],g[4]=$CLJS.Fc(g[4]),g[2]=k,g[1]=3,$CLJS.X;if(43===k)return m=g[10],k=pV.h(m),l=$CLJS.iT.h(m),g[2]=$CLJS.UC(mV,k,l),g[1]=45,$CLJS.X;if(29===k)return g[2]=g[2],g[1]=26,$CLJS.X;if(44===k)return m=g[10],g[2]=function(){var u=m;return function(v){return new Promise(function(A){$CLJS.HU("-\x3e %-10s%-20s%s",
$CLJS.I([pV.h(u),$CLJS.iT.h(u),$CLJS.Hz(v,$CLJS.I([$CLJS.yi,!0]))]));return A.h?A.h(!0):A.call(null,!0)})}}(),g[1]=45,$CLJS.X;if(6===k)return k=g[7],l=b("ATOMIST_WORKSPACE_ID","WORKSPACE_ID"),k=$CLJS.W.l(k,$CLJS.yU,l),g[2]=k,g[1]=8,$CLJS.X;if(28===k)return k=g[11],g[2]=k,g[1]=29,$CLJS.X;if(25===k)return k=g[15],g[2]=k,g[1]=26,$CLJS.X;if(34===k)return k=g[16],g[2]=k,g[1]=35,$CLJS.X;if(17===k)return k=g[2],l=b("ATOMIST_TOPIC","TOPIC"),g[17]=k,g[1]=$CLJS.r(l)?18:19,$CLJS.X;if(3===k)return $CLJS.Iy(g,
g[2]);if(12===k)return k=g[14],l=b("ATOMIST_PAYLOAD"),k=$CLJS.W.l(k,tV,l),g[2]=k,g[1]=14,$CLJS.X;if(2===k)return g[4]=$CLJS.be(5,g[4]),k=c,l=b("ATOMIST_WORKSPACE_ID","WORKSPACE_ID"),g[7]=k,g[1]=$CLJS.r(l)?6:7,$CLJS.X;if(23===k)return m=g[10],k=g[15],k=g[2],l=$CLJS.yU.h(k),g[10]=k,g[15]=l,g[1]=$CLJS.r(l)?24:25,$CLJS.X;if(35===k)return g[2]=g[2],g[1]=32,$CLJS.X;if(19===k)return k=g[17],g[2]=k,g[1]=20,$CLJS.X;if(11===k)return k=g[2],l=b("ATOMIST_PAYLOAD","PAYLOAD"),g[14]=k,g[1]=$CLJS.r(l)?12:13,$CLJS.X;
if(9===k)return k=g[18],l=b("ATOMIST_GRAPHQL_ENDPOINT","GRAPHQL_ENDPOINT"),k=$CLJS.W.l(k,sV,l),g[2]=k,g[1]=11,$CLJS.X;if(5===k)return g[4]=$CLJS.Fc(g[4]),g[5]=g[2],g[1]=4,g[5]=null,$CLJS.X;if(14===k)return k=g[2],l=b("ATOMIST_STORAGE","STORAGE"),g[12]=k,g[1]=$CLJS.r(l)?15:16,$CLJS.X;if(45===k){m=g[10];k=g[2];l=[$CLJS.rj];var p=[$CLJS.yU.h(m)];l=$CLJS.Tm(l,p);k=$CLJS.W.v(m,$CLJS.rT,k,$CLJS.I([$CLJS.oj,l]));k=a.h?a.h(k):a.call(null,k);return $CLJS.Ky(g,42,k)}return 26===k?(g[1]=$CLJS.r(g[2])?39:40,
$CLJS.X):16===k?(k=g[12],g[2]=k,g[1]=17,$CLJS.X):38===k?(g[2]=g[2],g[1]=35,$CLJS.X):30===k?(k=g[16],m=g[10],k=tV.h(m),g[16]=k,g[1]=$CLJS.r(k)?33:34,$CLJS.X):10===k?(k=g[18],g[2]=k,g[1]=11,$CLJS.X):18===k?(k=g[17],l=b("ATOMIST_TOPIC","TOPIC"),k=$CLJS.W.l(k,pV,l),g[2]=k,g[1]=20,$CLJS.X):42===k?(k=$CLJS.QU(g[2]),g[2]=k,g[1]=41,$CLJS.X):37===k?(k=g[13],g[2]=k,g[1]=38,$CLJS.X):8===k?(k=g[2],l=b("ATOMIST_GRAPHQL_ENDPOINT","GRAPHQL_ENDPOINT"),g[18]=k,g[1]=$CLJS.r(l)?9:10,$CLJS.X):null}return function(){function g(m){for(;;){a:try{for(;;){var p=
h(m);if(!$CLJS.R(p,$CLJS.X)){var u=p;break a}}}catch(v){u=v;m[2]=u;if($CLJS.B(m[4]))m[1]=$CLJS.C(m[4]);else throw u;u=$CLJS.X}if(!$CLJS.R(u,$CLJS.X))return u}}function k(){var m=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];m[0]=l;m[1]=1;return m}var l=null;l=function(m){switch(arguments.length){case 0:return k.call(this);case 1:return g.call(this,m)}throw Error("Invalid arity: "+arguments.length);};l.N=k;l.h=g;return l}()}(),f=function(){var h=e();
h[6]=d;return h}();return $CLJS.fy(f)});return d}}],null),new $CLJS.T(null,1,5,$CLJS.U,[function(a){return function(b){var c=$CLJS.Fl(null),d=$CLJS.Fl(1);$CLJS.gl(function(){var f=function(){function g(k){var l=k[1];if(7===l)return l=k[2],k[4]=$CLJS.Fc(k[4]),k[2]=l,k[1]=3,$CLJS.X;if(1===l)return k[2]=null,k[1]=2,$CLJS.X;if(4===l)return k[2]=k[2],k[1]=3,$CLJS.X;if(13===l)return l=k[2],k[4]=$CLJS.Fc(k[4]),k[2]=l,k[1]=7,$CLJS.X;if(6===l)return k[4]=$CLJS.be(11,k[4]),l=a.h?a.h(b):a.call(null,b),$CLJS.Ky(k,
12,l);if(3===l)return $CLJS.Iy(k,k[2]);if(12===l)return l=$CLJS.QU(k[2]),k[7]=l,$CLJS.Jy(k,13,c,"done");if(2===l)return k[4]=$CLJS.be(5,k[4]),k[2]=null,k[1]=6,$CLJS.X;if(11===l)return k[4]=$CLJS.Fc(k[4]),k[5]=k[2],k[1]=8,k[5]=null,$CLJS.X;if(9===l)return k[8]=k[2],$CLJS.Jy(k,10,c,$CLJS.nU);if(5===l)return k[4]=$CLJS.Fc(k[4]),k[5]=k[2],k[1]=4,k[5]=null,$CLJS.X;if(10===l)return k[2]=k[2],k[1]=7,$CLJS.X;if(8===l){l=$CLJS.lV(function(){return function(u){var v=$CLJS.Fl(1);$CLJS.gl(function(){var A=function(){return function(){function E(P){for(;;){a:try{for(;;){var S=
1===P[1]?$CLJS.Iy(P,u):null;if(!$CLJS.R(S,$CLJS.X)){var ea=S;break a}}}catch(ba){ea=ba;P[2]=ea;if($CLJS.B(P[4]))P[1]=$CLJS.C(P[4]);else throw ea;ea=$CLJS.X}if(!$CLJS.R(ea,$CLJS.X))return ea}}function J(){var P=[null,null,null,null,null,null,null];P[0]=O;P[1]=1;return P}var O=null;O=function(P){switch(arguments.length){case 0:return J.call(this);case 1:return E.call(this,P)}throw Error("Invalid arity: "+arguments.length);};O.N=J;O.h=E;return O}()}(),z=function(){var E=A();E[6]=v;return E}();return $CLJS.fy(z)});
return v}}());var m=[$CLJS.ui,$CLJS.rO],p=[1,$CLJS.t.h(k[2])];m=$CLJS.Tm(m,p);m=$CLJS.W.l(b,$CLJS.HT,m);l=l(m);return $CLJS.Ky(k,9,l)}return null}return function(){function k(p){for(;;){a:try{for(;;){var u=g(p);if(!$CLJS.R(u,$CLJS.X)){var v=u;break a}}}catch(A){v=A;p[2]=v;if($CLJS.B(p[4]))p[1]=$CLJS.C(p[4]);else throw v;v=$CLJS.X}if(!$CLJS.R(v,$CLJS.X))return v}}function l(){var p=[null,null,null,null,null,null,null,null,null];p[0]=m;p[1]=1;return p}var m=null;m=function(p){switch(arguments.length){case 0:return l.call(this);
case 1:return k.call(this,p)}throw Error("Invalid arity: "+arguments.length);};m.N=l;m.h=k;return m}()}(),h=function(){var g=f();g[6]=d;return g}();return $CLJS.fy(h)});var e=$CLJS.bV(c);console.info(e);return e.then(function(f){console.info(f);return nV()}).catch(function(f){console.error(f);return nV()})}}],null)]));