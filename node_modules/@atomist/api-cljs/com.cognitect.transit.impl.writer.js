var window=global;var $CLJS=require("./cljs_env");require("./goog.base.js");require("./com.cognitect.transit.util.js");require("./com.cognitect.transit.caching.js");require("./com.cognitect.transit.handlers.js");require("./com.cognitect.transit.types.js");require("./goog.math.long.js");
var Ow,Pw,Rw,Sw,Tw,Uw,Vw;Ow=function(a){var b=Math.floor(a/44);a=String.fromCharCode(a%44+48);return 0===b?"^"+a:"^"+String.fromCharCode(b+48)+a};Pw=function(){this.sh=this.We=this.Ua=0;this.cache={}};Rw=function(a,b,c){var d=[];if((0,$CLJS.yv)(b))for(var e=0;e<b.length;e++)d.push($CLJS.Qw(a,b[e],!1,c));else b.forEach(function(f){d.push($CLJS.Qw(a,f,!1,c))});return d};Sw=function(a,b){return"string"!==typeof b?(a=a.vd(b))&&1===a.tag(b).length:!0};
Tw=function(a,b){var c=a.Mf(b),d=!0;if(c){for(b=0;b<c.length&&(d=Sw(a,c[b]),d);b+=2);return d}if(b.keys){c=b.keys();var e=null;if(c.next){for(e=c.next();!e.done;){d=Sw(a,e.value);if(!d)break;e=c.next()}return d}}if(b.forEach)return b.forEach(function(f,h){d=d&&Sw(a,h)}),d;throw Error("Cannot walk keys of object type "+(null==b?null:b.constructor).name);};
Uw=function(a){if(a.constructor.transit$isObject)return!0;var b=a.constructor.toString();b=b.substr(9);b=b.substr(0,b.indexOf("("));b="Object"==b;"undefined"!=typeof Object.defineProperty?Object.defineProperty(a.constructor,"transit$isObject",{value:b,enumerable:!1}):a.constructor.transit$isObject=b;return b};
Vw=function(a,b,c){var d=null,e=null,f=null;d=null;var h=0;if(b.constructor===Object||null!=b.forEach||a.Xe&&Uw(b)){if(a.gf){if(null!=b.forEach)if(Tw(a,b)){var g={};b.forEach(function(k,l){g[$CLJS.Qw(a,l,!0,!1)]=$CLJS.Qw(a,k,!1,c)})}else{d=a.Mf(b);e=[];f=a.$b("~#","cmap","",!0,c);if(d)for(;h<d.length;h+=2)e.push($CLJS.Qw(a,d[h],!1,!1)),e.push($CLJS.Qw(a,d[h+1],!1,c));else b.forEach(function(k,l){e.push($CLJS.Qw(a,l,!1,!1));e.push($CLJS.Qw(a,k,!1,c))});g={};g[f]=e}else for(d=(0,$CLJS.xv)(b),g={};h<
d.length;h++)g[$CLJS.Qw(a,d[h],!0,!1)]=$CLJS.Qw(a,b[d[h]],!1,c);return g}if(null!=b.forEach){if(Tw(a,b)){d=a.Mf(b);g=["^ "];if(d)for(;h<d.length;h+=2)g.push($CLJS.Qw(a,d[h],!0,c)),g.push($CLJS.Qw(a,d[h+1],!1,c));else b.forEach(function(k,l){g.push($CLJS.Qw(a,l,!0,c));g.push($CLJS.Qw(a,k,!1,c))});return g}d=a.Mf(b);e=[];f=a.$b("~#","cmap","",!0,c);if(d)for(;h<d.length;h+=2)e.push($CLJS.Qw(a,d[h],!1,c)),e.push($CLJS.Qw(a,d[h+1],!1,c));else b.forEach(function(k,l){e.push($CLJS.Qw(a,l,!1,c));e.push($CLJS.Qw(a,
k,!1,c))});return[f,e]}g=["^ "];for(d=(0,$CLJS.xv)(b);h<d.length;h++)g.push($CLJS.Qw(a,d[h],!0,c)),g.push($CLJS.Qw(a,b[d[h]],!1,c));return g}if(null!=a.fh)return a.fh(b,function(k){return $CLJS.Qw(a,k,!0,c)},function(k){return $CLJS.Qw(a,k,!1,c)});h=(null==b?null:b.constructor).name;d=Error("Cannot write "+h);d.data={ug:b,type:h};throw d;};
$CLJS.Qw=function(a,b,c,d){null!==a.transform&&(b=a.transform(b));var e=a.vd(b)||(a.Xe?a.Xe(b,a.Lb):null),f=e?e.tag(b):null,h=e?e.rep(b):null;if(null!=e&&null!=f)switch(f){case "_":return a.Vh(c,d);case "s":return 0<h.length?(b=h.charAt(0),b="~"===b||"^"===b||"`"===b?"~"+h:h):b=h,a.$b("","",b,c,d);case "?":return a.Sh(h,c,d);case "i":return a.Uh(h,c,d);case "d":return a.Th(h,c,d);case "b":return a.Rh(h,c,d);case "'":return a.Wh(a,h,d);case "array":return Rw(a,h,d);case "map":return Vw(a,h,d);default:a:{if(1===
f.length){if("string"===typeof h){a=a.$b("~",f,h,c,d);break a}if(c||a.Kf){(h=a.gf&&e.getVerboseHandler())?(f=h.tag(b),h=h.stringRep(b,h)):h=e.stringRep(b,e);if(null!==h){a=a.$b("~",f,h,c,d);break a}a=Error('Tag "'+f+'" cannot be encoded as string');a.data={tag:f,rep:h,ug:b};throw a;}}c=f;b=h;a.gf?(e={},e[a.$b("~#",c,"",!0,d)]=$CLJS.Qw(a,b,!1,d),a=e):a=[a.$b("~#",c,"",!0,d),$CLJS.Qw(a,b,!1,d)]}return a}else throw a=(null==b?null:b.constructor).name,d=Error("Cannot write "+a),d.data={ug:b,type:a},d;
};$CLJS.Ww=function(a,b){this.Ae=a;this.options=b||{};this.cache=!1===this.options.cache?null:this.options.cache?this.options.cache:new Pw};Pw.prototype.write=function(a,b){return $CLJS.zv(a,b)?(4096===this.sh?(this.clear(),this.We=0,this.cache={}):1936===this.Ua&&this.clear(),b=this.cache[a],null==b?(this.cache[a]=[Ow(this.Ua),this.We],this.Ua++,a):b[1]!=this.We?(b[1]=this.We,b[0]=Ow(this.Ua),this.Ua++,a):b[0]):a};Pw.prototype.clear=function(){this.Ua=0;this.We++};$CLJS.Ww.prototype.di=function(){return this.Ae};
$CLJS.Ww.prototype.marshaller=$CLJS.Ww.prototype.di;$CLJS.Ww.prototype.write=function(a,b){var c=b||{};b=c.asMapKey||!1;var d=this.Ae.gf?!1:this.cache;if(!1===c.marshalTop)a=$CLJS.Qw(this.Ae,a,b,d);else{c=this.Ae;var e=JSON,f=e.stringify;var h=c.vd(a)||(c.Xe?c.Xe(a,c.Lb):null);if(null!=h)a=1===h.tag(a).length?$CLJS.Lv("'",a):a;else throw b=(null==a?null:a.constructor).name,d=Error("Cannot write "+b),d.data={ug:a,type:b},d;a=f.call(e,$CLJS.Qw(c,a,b,d))}null!=this.cache&&this.cache.clear();return a};
$CLJS.Ww.prototype.write=$CLJS.Ww.prototype.write;$CLJS.Ww.prototype.register=function(a,b){this.Ae.Lj(a,b)};$CLJS.Ww.prototype.register=$CLJS.Ww.prototype.register;