var window=global;var $CLJS=require("./cljs_env");require("./goog.base.js");require("./cljs.core.js");require("./cljs.core.async.js");require("./cljs_node_io.file.js");require("./cljs_node_io.streams.js");require("./goog.uri.uri.js");
var mL,nL,oL,pL,qL,sL,tL,uL;mL=function(a,b){if(null!=a&&null!=a.Od)a=a.Od(a,b);else{var c=mL[$CLJS.wa(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=mL._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw $CLJS.gb("IOFactory.make-reader",a);}return a};
nL=function(a,b){if(null!=a&&null!=a.Pd)a=a.Pd(a,b);else{var c=nL[$CLJS.wa(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=nL._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw $CLJS.gb("IOFactory.make-writer",a);}return a};
oL=function(a){a.cljs_node_io$protocols$IOutputStream$=$CLJS.x;a.uf=$CLJS.x;a.Od=function(){throw Error(["ILLEGAL ARGUMENT: Cannot open \x3c",$CLJS.Zj.v($CLJS.I([this])),"\x3e as an InputStream."].join(""));};a.rd=function(){throw Error(["ILLEGAL ARGUMENT: Cannot open \x3c",$CLJS.Zj.v($CLJS.I([this])),"\x3e as an InputStream."].join(""));};a.Pd=function(){return this};a.sd=function(){return this};return a};
pL=function(a,b){var c=$CLJS.ze(b);b=$CLJS.M.g(c,$CLJS.Rl);var d=$CLJS.M.g(c,$CLJS.Ni),e=$CLJS.M.g(c,$CLJS.Ql),f=$CLJS.M.g(c,$CLJS.Pi);c=$CLJS.M.g(c,$CLJS.LK);a=$CLJS.OK.createWriteStream(a,{defaultEncoding:$CLJS.r(e)?e:"utf8",flags:$CLJS.r(d)?d:$CLJS.r(b)?"a":"w",fd:$CLJS.r(c)?c:null,mode:$CLJS.r(f)?f:438});var h=$CLJS.df(null);a.on("open",function(g){return $CLJS.ef(h,g)});a.cljs_node_io$protocols$IOutputStream$=$CLJS.x;a.Id=$CLJS.x;a.ga=function(g,k){return $CLJS.G.g($CLJS.fb(this),$CLJS.fb(k))&&
$CLJS.G.g(this.path,k.path)};a.Sa=$CLJS.x;a.la=function(g,k){$CLJS.Xb(k,"#object [FileOutputStream");return $CLJS.Xb(k,["  ",$CLJS.t.h(this.path),"]"].join(""))};a.getFd=function(){return $CLJS.w(h)};return oL(a)};qL=function(a,b){return pL($CLJS.MK(a,b,"Output"),b)};
$CLJS.rL=function(a){if(null!=a&&null!=a.tf)a=a.tf(a);else{var b=$CLJS.rL[$CLJS.wa(null==a?null:a)];if(null!=b)a=b.h?b.h(a):b.call(null,a);else if(b=$CLJS.rL._,null!=b)a=b.h?b.h(a):b.call(null,a);else throw $CLJS.gb("Coercions.as-file",a);}return a};sL=function(a,b){if(null!=a&&null!=a.rd)a=a.rd(a,b);else{var c=sL[$CLJS.wa(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=sL._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw $CLJS.gb("IOFactory.make-input-stream",a);}return a};
tL=function(a,b){if(null!=a&&null!=a.sd)a=a.sd(a,b);else{var c=tL[$CLJS.wa(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=tL._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw $CLJS.gb("IOFactory.make-output-stream",a);}return a};
uL=function(a,b){var c=$CLJS.df(0),d=a.length;b=$CLJS.KK(new $CLJS.SK.gk($CLJS.Nl($CLJS.Xj.v($CLJS.I([b,new $CLJS.q(null,1,[$CLJS.RK,function(e){if($CLJS.w(c)<d){var f=a.slice($CLJS.w(c),$CLJS.w(c)+e);this.push(f);return $CLJS.ai.l(c,$CLJS.Cj,e)}return this.push(null)}],null)])))));return $CLJS.KK(b)};
$CLJS.wL=function(a,b){var c=new $CLJS.T(null,2,5,$CLJS.U,[$CLJS.fb(a),$CLJS.fb(b)],null);if($CLJS.r(function(){var d=new $CLJS.T(null,2,5,$CLJS.U,[$CLJS.yl,null],null);return $CLJS.G.g?$CLJS.G.g(d,c):$CLJS.G.call(null,d,c)}()))return a.getPath();if($CLJS.r(function(){var d=new $CLJS.T(null,2,5,$CLJS.U,[String,null],null);return $CLJS.G.g?$CLJS.G.g(d,c):$CLJS.G.call(null,d,c)}()))return a;if($CLJS.r(function(){var d=new $CLJS.T(null,2,5,$CLJS.U,[String,String],null);return $CLJS.G.g?$CLJS.G.g(d,c):
$CLJS.G.call(null,d,c)}()))return $CLJS.vL.join.g?$CLJS.vL.join.g(a,b):$CLJS.vL.join.call(null,a,b);if($CLJS.r(function(){var d=new $CLJS.T(null,2,5,$CLJS.U,[$CLJS.lL,String],null);return $CLJS.G.g?$CLJS.G.g(d,c):$CLJS.G.call(null,d,c)}()))return a=a.getPath(),$CLJS.vL.join.g?$CLJS.vL.join.g(a,b):$CLJS.vL.join.call(null,a,b);if($CLJS.r($CLJS.G.g?$CLJS.G.g($CLJS.Ai,c):$CLJS.G.call(null,$CLJS.Ai,c)))throw new TypeError(["Unrecognized path configuration passed to File constructor.\nYou passed ",$CLJS.Zj.v($CLJS.I([a])),
" and ",$CLJS.Zj.v($CLJS.I([b])),"\nYou must pass a [string], [uri], [string string], or [file string]."].join(""));throw Error(["No matching clause: ",$CLJS.t.h(c)].join(""));};$CLJS.n=$CLJS.lL.prototype;$CLJS.n.tf=$CLJS.Ia(44,function(){return this});$CLJS.n.sd=$CLJS.Ia(43,function(a,b){return qL(this,b)});$CLJS.n.Pd=$CLJS.Ia(42,function(a,b){return nL(this.sd(null,b),b)});$CLJS.n.rd=$CLJS.Ia(41,function(a,b){return $CLJS.QK(this,b)});
$CLJS.n.Od=$CLJS.Ia(40,function(a,b){return mL(this.rd(null,b),b)});var xL=new $CLJS.Q(null,"InputStream","InputStream",1853664890),yL=new $CLJS.Q(null,"File","File",-1707525042),zL=new $CLJS.Q(null,"OutputStream","OutputStream",-1389658127);$CLJS.vL=require("path");Buffer.prototype.Id=$CLJS.x;Buffer.prototype.ga=function(a,b){try{return this.equals(b)}catch(c){if(c instanceof Error)return!1;throw c;}};$CLJS.rL["null"]=function(){return null};$CLJS.rL.string=function(a){return new $CLJS.lL($CLJS.wL(a,null))};$CLJS.n=$CLJS.yl.prototype;$CLJS.n.tf=function(){if($CLJS.G.g("file",this.getScheme()))return $CLJS.rL(this.getPath());throw Error(["IllegalArgumentException : Uri's must have file protocol: ",$CLJS.t.h(this)].join(""));};
$CLJS.n.uf=$CLJS.x;$CLJS.n.Od=function(a,b){return mL(sL(this,b),b)};$CLJS.n.Pd=function(a,b){return nL(tL(this,b),b)};$CLJS.n.rd=function(a,b){if($CLJS.G.g("file",this.getScheme()))return $CLJS.QK($CLJS.rL(this),b);throw Error(["IllegalArgumentException: Can not read from non-file URL \x3c",$CLJS.t.h(this),"\x3e"].join(""));};
$CLJS.n.sd=function(a,b){if($CLJS.G.g("file",this.getScheme()))return tL($CLJS.rL(this),b);throw Error(["IllegalArgumentException: Can not write to non-file URL \x3c",$CLJS.t.h(this),"\x3e"].join(""));};mL.string=function(a,b){return mL($CLJS.rL(a),b)};nL.string=function(a,b){return nL($CLJS.rL(a),b)};sL.string=function(a,b){try{return sL(new $CLJS.yl(a),b)}catch(c){if(c instanceof Error)return(new $CLJS.lL(a)).rd(null,b);throw c;}};
tL.string=function(a,b){try{return tL(new $CLJS.yl(a),b)}catch(c){if(c instanceof Error)return(new $CLJS.lL(a)).sd(null,b);throw c;}};$CLJS.n=Buffer.prototype;$CLJS.n.uf=$CLJS.x;$CLJS.n.Od=function(a,b){return mL(sL(this,b),b)};$CLJS.n.rd=function(a,b){return uL(this,b)};$CLJS.n.Pd=function(a,b){return nL(tL(this,b),b)};$CLJS.n.sd=function(){throw Error(["IllegalArgumentException : Cannot open \x3c",$CLJS.Zj.v($CLJS.I([this])),"\x3e as an OutputStream."].join(""));};
var AL=function(){var a=$CLJS.df($CLJS.Ee),b=$CLJS.df($CLJS.Ee),c=$CLJS.df($CLJS.Ee),d=$CLJS.df($CLJS.Ee),e=$CLJS.M.l($CLJS.Ee,$CLJS.Ji,$CLJS.Yh.N?$CLJS.Yh.N():$CLJS.Yh.call(null));return new $CLJS.gi($CLJS.Oh.g("cljs-node-io.core","do-copy"),function(f,h){return new $CLJS.T(null,2,5,$CLJS.U,[function(){var g=null!=f&&$CLJS.x===f.cljs_node_io$protocols$IInputStream$?xL:null!=f&&$CLJS.x===f.cljs_node_io$protocols$IOutputStream$?zL:null;if($CLJS.r(g))return g;g=null!=f&&$CLJS.x===f.cg?yL:null;return $CLJS.r(g)?
g:$CLJS.fb(f)}(),function(){var g=null!=h&&$CLJS.x===h.cljs_node_io$protocols$IInputStream$?xL:null!=h&&$CLJS.x===h.cljs_node_io$protocols$IOutputStream$?zL:null;if($CLJS.r(g))return g;g=null!=h&&$CLJS.x===h.cg?yL:null;return $CLJS.r(g)?g:$CLJS.fb(h)}()],null)},e,a,b,c,d)}();AL.Pa(null,new $CLJS.T(null,2,5,$CLJS.U,[xL,zL],null),function(a,b){var c=$CLJS.Fl(new $CLJS.XK);b.on("finish",function(){return $CLJS.Wk(c)});a.Mk(b);return c});
AL.Pa(null,new $CLJS.T(null,2,5,$CLJS.U,[yL,yL],null),function(a,b,c){a=$CLJS.QK(a,new $CLJS.q(null,1,[$CLJS.Ql,""],null));b=qL(b,$CLJS.Xj.v($CLJS.I([new $CLJS.q(null,1,[$CLJS.Ql,""],null),c])));return AL.l(a,b,c)});AL.Pa(null,new $CLJS.T(null,2,5,$CLJS.U,[yL,zL],null),function(a,b,c){a=$CLJS.QK(a,new $CLJS.q(null,1,[$CLJS.Ql,""],null));return AL.l(a,b,c)});
AL.Pa(null,new $CLJS.T(null,2,5,$CLJS.U,[xL,yL],null),function(a,b,c){b=qL(b,$CLJS.Xj.v($CLJS.I([new $CLJS.q(null,1,[$CLJS.Ql,""],null),c])));return AL.l(a,b,c)});AL.Pa(null,new $CLJS.T(null,2,5,$CLJS.U,[Buffer,zL],null),function(a,b,c){return AL.l(uL(a,c),b,null)});AL.Pa(null,new $CLJS.T(null,2,5,$CLJS.U,[Buffer,yL],null),function(a,b,c){return AL.l(uL(a,c),b,c)});